webpackJsonp([20],{"+skl":function(e,t){},"2HTv":function(e,t){},GCuT:function(e,t,n){"use strict";var r=n("mvHQ"),a=n.n(r);function i(){}i.validateCronExpression=function(e){if(null==e||0==e.length)return!1;var t=e.split(" "),n=t.length;if(6!=n&&7!=n)return!1;var r=e.match(/\?/g);if(null!=r&&r.length>1)return!1;var a="";if(i.isNotWildCard(t[0],/[\*]/gi)&&!i.segmentValidator("([0-9\\\\,-\\/])",t[0],[0,59],"seconds"))return!1;if(i.isNotWildCard(t[1],/[\*]/gi)&&!i.segmentValidator("([0-9\\\\,-\\/])",t[1],[0,59],"minutes"))return!1;if(i.isNotWildCard(t[2],/[\*]/gi)&&!i.segmentValidator("([0-9\\\\,-\\/])",t[2],[0,23],"hours"))return!1;if(i.isNotWildCard(t[3],/[\*\?]/gi)){if(!i.segmentValidator("([0-9LWC\\\\,-\\/])",t[3],[1,31],"days of the month"))return!1}else a=t[3];if(i.isNotWildCard(t[4],/[\*]/gi)&&(t[4]=i.convertMonthsToInteger(t[4]),!i.segmentValidator("([0-9\\\\,-\\/])",t[4],[1,12],"months")))return!1;if(i.isNotWildCard(t[5],/[\*\?]/gi)){if(t[5]=i.convertDaysToInteger(t[5]),!i.segmentValidator("([0-9LC#\\\\,-\\/])",t[5],[1,7],"days of the week"))return!1}else if(a==String(t[5]))return!1;return!(7==n&&i.isNotWildCard(t[6],/[\*]/gi)&&!i.segmentValidator("([0-9\\\\,-\\/])",t[6],[1970,2099],"years"))},i.isNotWildCard=function(e,t){var n=e.match(t);return null==n||0==n.length},i.convertDaysToInteger=function(e){var t=e;return t=(t=(t=(t=(t=(t=(t=t.replace(/SUN/gi,"1")).replace(/MON/gi,"2")).replace(/TUE/gi,"3")).replace(/WED/gi,"4")).replace(/THU/gi,"5")).replace(/FRI/gi,"6")).replace(/SAT/gi,"7")},i.convertMonthsToInteger=function(e){var t=e;return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/JAN/gi,"1")).replace(/FEB/gi,"2")).replace(/MAR/gi,"3")).replace(/APR/gi,"4")).replace(/MAY/gi,"5")).replace(/JUN/gi,"6")).replace(/JUL/gi,"7")).replace(/AUG/gi,"8")).replace(/SEP/gi,"9")).replace(/OCT/gi,"10")).replace(/NOV/gi,"11")).replace(/DEC/gi,"12")},i.segmentValidator=function(e,t,n,r){var a=t,i=new Array;if(!new RegExp(e,"gi").test(a))return!1;var s=t.match(/L/gi);if(null!=s&&s.length>1)return!1;for(var o,u=a.split(","),c=-1,l=u.length;++c<l;){var d,f=u[c],p=/(\w*)/;if(o=p.exec(f),!(o=(p=/(\w*)\-?\d+(\w*)/).exec(f))||o[0]!=f||-1!=f.indexOf("L")||-1!=f.indexOf("l")||-1!=f.indexOf("C")||-1!=f.indexOf("c")||-1!=f.indexOf("W")||-1!=f.indexOf("w")||-1!=f.indexOf("/")||-1!=f.indexOf("-")&&0!=f.indexOf("-")||-1!=f.indexOf("#"))if((o=(p=/(\w*)L|C|W(\w*)/i).exec(f))&&""!=o[0]&&(f.indexOf("L")>-1||f.indexOf("l")>-1||f.indexOf("C")>-1||f.indexOf("c")>-1||f.indexOf("W")>-1||f.indexOf("w")>-1)){if("L"==f||"l"==f)continue;if(!(o=(p=/(\w*)\d+(l|c|w)?(\w*)/i).exec(f))||o[0]!=f)continue;var _=o[0];_=_.replace(/(l|c|w)/gi,""),(d=Number(_))&&!isNaN(d)?i.push(d):"0"==o[0]&&i.push(d)}else{var h;if(f.indexOf("/")>-1){if(2!=(h=f.split("/")).length)continue;(d=h[0])&&!isNaN(d)?i.push(d):"0"==h[0]&&i.push(d)}else if(f.indexOf("#")>-1){if(2!=(h=f.split("#")).length)continue;(d=h[0])&&!isNaN(d)?i.push(d):"0"==h[0]&&i.push(d)}else if(f.indexOf("-")>0){if(2!=(h=f.split("-")).length)continue;if(Number(h[0])>Number(h[1]))continue;(d=h[0])&&!isNaN(d)?i.push(d):"0"==h[0]&&i.push(d),(d=h[1])&&!isNaN(d)?i.push(d):"0"==h[1]&&i.push(d)}else;}else(d=o[0])&&!isNaN(d)?i.push(d):"0"==o[0]&&i.push(d)}if(c=-1,0==(l=i.length))return!1;for(;++c<l;)if(i[c]<n[0]||i[c]>n[1])return!1;return!0},n.d(t,"c",function(){return s}),n.d(t,"a",function(){return o}),n.d(t,"k",function(){return u}),t.e=function(e,t){var n=document.createElement("input");n.setAttribute("id","cp_linkknown_input"),n.value=e,document.getElementsByTagName("body")[0].appendChild(n),document.getElementById("cp_linkknown_input").select(),document.execCommand("copy"),document.getElementById("cp_linkknown_input").remove(),t&&t(e)},t.j=function(e,t){for(var n=0;n<t.length;n++)if(e===t[n])return!0;return!1},t.o=function(e){return/^[a-zA-Z0-9_]{1,}$/.test(e)},t.f=function(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in n)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return t},n.d(t,"p",function(){return c}),t.m=function(e,t){return e.split(t)},t.h=function(e,t){return new Array(t+1).join(e)},t.n=function(e,t,n){if(null===e||0===e.length)return e;if(t<0||t>e.length-1)return e;if(n<0||n>e.length-1)return e;return e[t]=e.splice(n,1,e[t])[0],e},t.i=function(e,t){return[].push.apply(e,t),e},t.g=function(e,t){return e.match(t)},t.l=function(e,t){return 0==e.indexOf(t)},t.b=function(){var e=(new Date).getTime(),t=e-l;return l=e,t<2e3},t.d=function(e){return JSON.parse(a()(e))};var s=function(e){return!o(e)},o=function(e){return null==e||void 0==e||""==e},u=function(e,t){return Math.round(e/t*1e4)/100+"%"};var c=function(e){return function(e){return i.validateCronExpression(e)}(e)};var l=(new Date).getTime()},IcnI:function(e,t,n){"use strict";var r=n("7+uW"),a=n("NYxO");r.default.use(a.a);t.a=new a.a.Store({state:{current_work_id:-1,current_work_step_id:-1,nodeMetas:[]},mutations:{SETCURRENT:function(e,t){var n=t.current_work_id,r=t.current_work_step_id;e.current_work_id=n,e.current_work_step_id=r},SET_NODE_METAS:function(e,t){var n=t.nodeMetas;e.nodeMetas=n}},actions:{commitSetCurrent:function(e,t){(0,e.commit)("SETCURRENT",{current_work_id:t.current_work_id,current_work_step_id:t.current_work_step_id})},commitSetNodeMetas:function(e,t){(0,e.commit)("SET_NODE_METAS",{nodeMetas:t.nodeMetas})}},getters:{}})},NEsz:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var i=n("VU/8")({name:"App",components:{}},a,!1,function(e){n("2HTv")},null,null).exports,s=n("/ocq"),o=n("Xxa5"),u=n.n(o),c=n("exGp"),l=n.n(c),d=n("gyMJ"),f=n("GCuT"),p={name:"AuditTaskEdit",data:function(){return{formInline:{id:0,task_name:"",task_desc:""},ruleInline:{task_name:[{required:!0,message:"请输入任务名称",trigger:"blur"},{validator:function(e,t,n){""===t?n(new Error("任务名称不能为空!")):Object(f.l)(t,"task_audit_")?t.length<10?n(new Error("任务名称太短,必须大于 10 个字符!")):n():n(new Error("任务名称必须以 'task_audit_' 开头!"))},trigger:"blur"}],task_desc:[{required:!0,message:"请输入任务描述",trigger:"blur"}]}}},methods:{handleSubmit:function(e){var t,n=this;this.$refs[e].validate((t=l()(u.a.mark(function t(r){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=7;break}return t.next=3,Object(d.m)(n.formInline);case 3:"SUCCESS"===t.sent.status?(n.$Message.success("提交成功!"),n.$emit("handleSucess"),n.formInline.id=0,n.$refs[e].resetFields()):n.$Message.error("提交失败!"),t.next=8;break;case 7:n.$Message.error("校验失败!");case 8:case"end":return t.stop()}},t,n)})),function(e){return t.apply(this,arguments)}))},initData:function(e){this.formInline=e}}},_={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Form",{ref:"formInline",attrs:{model:e.formInline,rules:e.ruleInline,"label-width":100}},[n("FormItem",{attrs:{prop:"task_name",label:"任务名称"}},[n("Input",{attrs:{type:"text",placeholder:"task_name"},model:{value:e.formInline.task_name,callback:function(t){e.$set(e.formInline,"task_name","string"==typeof t?t.trim():t)},expression:"formInline.task_name"}})],1),e._v(" "),n("FormItem",{attrs:{prop:"task_desc",label:"任务描述"}},[n("Input",{attrs:{type:"textarea",rows:5,placeholder:"task_desc"},model:{value:e.formInline.task_desc,callback:function(t){e.$set(e.formInline,"task_desc","string"==typeof t?t.trim():t)},expression:"formInline.task_desc"}})],1),e._v(" "),n("FormItem",[n("Button",{style:{float:"right"},attrs:{type:"success"},on:{click:function(t){e.handleSubmit("formInline")}}},[e._v("确认")])],1)],1)],1)},staticRenderFns:[]};var h={name:"AuditTaskList",components:{AuditTaskEdit:n("VU/8")(p,_,!1,function(e){n("nF77")},"data-v-63385c70",null).exports},data:function(){var e=this;return{showAuditEdit:!1,total:0,offset:10,current_page:1,columns1:[{title:"任务名称",key:"task_name"},{title:"任务描述",key:"task_desc"},{title:"操作",key:"operate",fixed:"right",render:function(t,n){return t("div",[t("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.$refs.auditTaskEdit.initData(Object(f.d)(e.tasks[n.index])),e.showAuditEdit=!0}}},"编辑"),t("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.$Modal.confirm({title:"删除",content:"确认删除该条数据吗？请谨慎操作！",onOk:function(){e.deleteAuditTask(e.tasks[n.index].task_name)},onCancel:function(){e.$Message.info("取消操作")}})}}},"删除"),t("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.$router.push({path:"/iwork/audit_detail",query:{task_name:e.tasks[n.index].task_name}})}}},"详情编辑")])}}],tasks:[]}},methods:{handleChange:function(e){this.current_page=e,this.refreshAllAuditTask()},handlePageSizeChange:function(e){this.offset=e,this.refreshAllAuditTask()},refreshAllAuditTask:function(){var e=l()(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d._1)(this.offset,this.current_page);case 2:"SUCCESS"===(t=e.sent).status&&(this.tasks=t.tasks,this.total=t.paginator.totalcount);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),deleteAuditTask:function(){var e=l()(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(t);case 2:"SUCCESS"===e.sent.status?(this.$Message.success("删除成功!"),this.refreshAllAuditTask()):this.$Message.error("删除失败!");case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),handleAuditEdit:function(e,t){this.showAuditEdit=!1,this.refreshAllAuditTask()}},mounted:function(){this.refreshAllAuditTask()}},m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",{staticClass:"press",staticStyle:{"text-align":"center"}},[e._v("智能内容审核系统")]),e._v(" "),n("Button",{staticStyle:{margin:"10px 0"},attrs:{type:"success",size:"small"},on:{click:function(t){e.showAuditEdit=!0}}},[e._v("新增审核任务")]),e._v(" "),n("Modal",{attrs:{title:"编辑审核任务","mask-closable":!1,"footer-hide":!0},model:{value:e.showAuditEdit,callback:function(t){e.showAuditEdit=t},expression:"showAuditEdit"}},[n("AuditTaskEdit",{ref:"auditTaskEdit",on:{handleSucess:e.handleAuditEdit}})],1),e._v(" "),n("Table",{attrs:{stripe:"",columns:e.columns1,data:e.tasks}}),e._v(" "),n("Page",{attrs:{total:e.total,"page-size":e.offset,"show-total":"","show-sizer":"",styles:{"text-align":"center","margin-top":"10px"}},on:{"on-change":e.handleChange,"on-page-size-change":e.handlePageSizeChange}})],1)},staticRenderFns:[]};var k=n("VU/8")(h,m,!1,function(e){n("NEsz")},"data-v-86917282",null).exports,g=n("mvHQ"),v=n.n(g),w={name:"AuditDetailSourceEdit",components:{},data:function(){return{tabValue:"tabValue_0",resources:[],taskDetail:{resource_name:"",col_names:[],query_cases:[{case_name:"全部",query_sql:"",query_desc:""}]}}},methods:{moveLocation:function(e,t){Object(f.n)(this.taskDetail.query_cases,e,e+t),t>0?this.tabValue="tabValue_"+(e<this.taskDetail.query_cases.length-1?e+1:e):t<0&&(this.tabValue="tabValue_"+(e>0?e-1:e))},handleRemove:function(e){this.taskDetail.query_cases.splice(e,1)},handleAdd:function(){this.taskDetail.query_cases.push({case_name:"新增场景"+this.taskDetail.query_cases.length,query_sql:"",query_desc:""})},editAuditTaskSource:function(){var e=l()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.n)({task_name:this.$route.query.task_name,resource_name:this.taskDetail.resource_name,query_cases:v()(this.taskDetail.query_cases)});case 2:"SUCCESS"===e.sent.status?(this.$Message.success("保存成功！"),this.$router.go(0)):this.$Message.error("配置错误!");case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),refreshAllResource:function(){var e=l()(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.F)("db");case 2:"SUCCESS"===(t=e.sent).status&&(this.resources=t.resources);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),refreshAuditDetail:function(){var e=l()(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d._2)(this.$route.query.task_name);case 2:"SUCCESS"===(t=e.sent).status&&(this.taskDetail=t.taskDetail,this.taskDetail.query_cases=t.taskDetail.query_cases||[],this.taskDetail.col_names=JSON.parse(t.taskDetail.col_names));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},mounted:function(){this.refreshAllResource(),this.refreshAuditDetail()}},S={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("\n  请选择数据源：\n  "),n("Select",{staticStyle:{width:"300px",margin:"10px 0"},model:{value:e.taskDetail.resource_name,callback:function(t){e.$set(e.taskDetail,"resource_name",t)},expression:"taskDetail.resource_name"}},e._l(e.resources,function(t,r){return n("Option",{key:t.resource_name,attrs:{value:t.resource_name}},[e._v("\n      "+e._s(t.resource_name)+" ~ "+e._s(t.resource_dsn)+"\n    ")])})),e._v(" "),n("br"),e._v(" "),n("div",{staticStyle:{display:"flex","margin-top":"20px",padding:"5px","border-top":"2px solid #eee"}},[n("div",{staticStyle:{width:"75%"}},[n("Tabs",{attrs:{type:"card",animated:!1,name:"tab_level_2",value:e.tabValue}},[e.taskDetail.query_cases&&e.taskDetail.query_cases.length>0?n("span",e._l(e.taskDetail.query_cases,function(t,r){return n("TabPane",{attrs:{name:"tabValue_"+r,label:t.case_name?t.case_name:"场景 "+(r+1),tab:"tab_level_2"}},[e._v("\n          场景名称: "),n("span",{staticStyle:{color:"#00ce00"}},[e._v("参考案例：生效、失效、审核通过、内容不合法等中文或英文")]),e._v(" "),n("Button",{attrs:{type:"error",size:"small"},on:{click:function(t){e.handleRemove(r)}}},[e._v("删除")]),e._v(" "),n("Icon",{attrs:{type:"md-arrow-back",size:"20"},on:{click:function(t){e.moveLocation(r,-1)}}}),e._v(" "),n("Icon",{attrs:{type:"md-arrow-forward",size:"20"},on:{click:function(t){e.moveLocation(r,1)}}}),e._v(" "),n("Input",{staticStyle:{margin:"5px 0"},attrs:{type:"text",placeholder:"请输入场景名称"},model:{value:t.case_name,callback:function(n){e.$set(t,"case_name",n)},expression:"item.case_name"}}),e._v("\n          场景查询sql: "),n("span",{staticStyle:{color:"#00ce00"}},[e._v("参考案例：select * from blog where status = 1")]),e._v(" "),n("Input",{staticStyle:{margin:"5px 0"},attrs:{type:"textarea",rows:6,placeholder:"请输入 query_sql"},model:{value:t.query_sql,callback:function(n){e.$set(t,"query_sql",n)},expression:"item.query_sql"}}),e._v("\n          场景描述: "),n("span",{staticStyle:{color:"#00ce00"}},[e._v("参考案例：查询所有 status = 1 的用户")]),e._v(" "),n("Input",{staticStyle:{margin:"5px 0"},attrs:{type:"textarea",rows:6,placeholder:"请输入描述"},model:{value:t.query_desc,callback:function(n){e.$set(t,"query_desc",n)},expression:"item.query_desc"}})],1)})):n("span",[e._v("暂无场景")])])],1),e._v(" "),n("div",{staticStyle:{width:"25%","padding-left":"10px"}},[n("Button",{attrs:{type:"success",size:"small"},on:{click:e.editAuditTaskSource}},[e._v("保存提交")]),e._v(" "),n("Button",{attrs:{type:"success",size:"small"},on:{click:e.handleAdd}},[e._v("新增场景")]),e._v(" "),n("br"),n("br"),e._v(" "),e._l(e.taskDetail.query_cases,function(t,r){return n("Tag",[n("span",{on:{click:function(t){e.tabValue="tabValue_"+r}}},[e._v(e._s(t.case_name))])])})],2)]),e._v(" "),n("h3",{staticStyle:{"margin-top":"20px"}},[e._v("字段显示类型：")]),e._v(" "),e._l(e.taskDetail.col_names,function(t,r){return n("p",[n("Tag",[e._v(e._s(t))])],1)})],2)},staticRenderFns:[]};var b=n("VU/8")(w,S,!1,function(e){n("cZ3a")},"data-v-2e439db8",null).exports,y={name:"AuditDetailTargetEdit",data:function(){return{tabValue:"tabValue_0",update_cases:[{case_name:"",update_sql:"",update_desc:""}]}},methods:{moveLocation:function(e,t){Object(f.n)(this.update_cases,e,e+t),t>0?this.tabValue="tabValue_"+(e<this.update_cases.length-1?e+1:e):t<0&&(this.tabValue="tabValue_"+(e>0?e-1:e))},handleSubmit:function(){var e=l()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.o)(this.$route.query.task_name,v()(this.update_cases));case 2:"SUCCESS"===e.sent.status?(this.$Message.success("保存成功！"),this.$router.go(0)):this.$Message.error("保存失败!");case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleAdd:function(){this.update_cases.push({case_name:"",update_sql:"",update_desc:""})},handleRemove:function(e){this.update_cases.splice(e,1)},refreshAuditDetail:function(){var e=l()(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d._2)(this.$route.query.task_name);case 2:"SUCCESS"===(t=e.sent).status&&(this.update_cases=t.taskDetail.update_cases,null==this.update_cases&&(this.update_cases=[],this.handleAdd()));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},mounted:function(){this.refreshAuditDetail()}},x={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"flex"}},[n("div",{staticStyle:{width:"75%"}},[n("Tabs",{attrs:{type:"card",animated:!1,name:"tab_level_2",value:e.tabValue}},e._l(e.update_cases,function(t,r){return n("TabPane",{attrs:{name:"tabValue_"+r,label:t.case_name?t.case_name:"场景 "+(r+1),tab:"tab_level_2"}},[e._v("\n\n        场景名称: "),n("span",{staticStyle:{color:"#00ce00"}},[e._v("参考案例：生效、失效、审核通过、内容不合法等中文或英文")]),e._v(" "),n("Button",{attrs:{type:"error",size:"small"},on:{click:function(t){e.handleRemove(r)}}},[e._v("删除")]),e._v(" "),n("Icon",{attrs:{type:"md-arrow-back",size:"20"},on:{click:function(t){e.moveLocation(r,-1)}}}),e._v(" "),n("Icon",{attrs:{type:"md-arrow-forward",size:"20"},on:{click:function(t){e.moveLocation(r,1)}}}),e._v(" "),n("Input",{staticStyle:{margin:"5px 0"},attrs:{type:"text",placeholder:"请输入场景名称"},model:{value:t.case_name,callback:function(n){e.$set(t,"case_name",n)},expression:"item.case_name"}}),e._v("\n\n        场景更新sql: "),n("span",{staticStyle:{color:"#00ce00"}},[e._v("参考案例：update blog set status = 1 where id = :id")]),e._v(" "),n("Input",{staticStyle:{margin:"5px 0"},attrs:{type:"textarea",rows:6,placeholder:"请输入 update_sql"},model:{value:t.update_sql,callback:function(n){e.$set(t,"update_sql",n)},expression:"item.update_sql"}}),e._v("\n\n        场景描述: "),n("span",{staticStyle:{color:"#00ce00"}},[e._v("参考案例：根据 id 更新状态为 1(生效状态)")]),e._v(" "),n("Input",{staticStyle:{margin:"10px 0"},attrs:{type:"textarea",rows:5,placeholder:"请输入描述"},model:{value:t.update_desc,callback:function(n){e.$set(t,"update_desc",n)},expression:"item.update_desc"}})],1)}))],1),e._v(" "),n("div",{staticStyle:{width:"25%","padding-left":"10px"}},[n("Button",{attrs:{type:"success",size:"small"},on:{click:e.handleSubmit}},[e._v("保存场景")]),e._v(" "),n("Button",{attrs:{type:"success",size:"small"},on:{click:e.handleAdd}},[e._v("新增场景")]),e._v(" "),n("br"),n("br"),e._v(" "),e._l(e.update_cases,function(t,r){return n("Tag",[n("span",{on:{click:function(t){e.tabValue="tabValue_"+r}}},[e._v(e._s(t.case_name))])])})],2)])},staticRenderFns:[]};var T=n("VU/8")(y,x,!1,function(e){n("oEVe")},"data-v-445a16ae",null).exports,O={name:"AuditDetailHandle",data:function(){return{rowDatas:[],colNames:[],current_page:1,total:0,offset:10,search:"",query_cases:[],update_cases:[],case_name:""}},methods:{filterAuditData:function(e){this.case_name=e,this.refreshHandleData()},handleChange:function(e){this.current_page=e,this.refreshHandleData()},handlePageSizeChange:function(e){this.offset=e,this.refreshHandleData()},refreshHandleData:function(){var e=l()(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.G)({task_name:this.$route.query.task_name,current_page:this.current_page,offset:this.offset,case_name:this.case_name});case 2:"SUCCESS"==(t=e.sent).status?(this.rowDatas=t.rowDatas,this.colNames=JSON.parse(t.colNames),this.total=t.totalcount):this.$Message.error("数据加载失败！"+t.errorMsg);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),refreshAuditDetail:function(){var e=l()(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d._2)(this.$route.query.task_name);case 2:"SUCCESS"==(t=e.sent).status&&(this.query_cases=t.taskDetail.query_cases,this.update_cases=t.taskDetail.update_cases);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleOperate:function(){var e=l()(u.a.mark(function e(t,n){var r,a,i,s,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r=t.update_sql,a=Object(f.g)(r,/:[a-zA-Z0-9_]+/g),i=0;i<a.length;i++)s=a[i],Object(f.l)(s,":")&&(r=r.replace(s,n[s.slice(1)]));return e.next=5,Object(d.x)(this.$route.query.task_name,r);case 5:"SUCCESS"==(o=e.sent).status?(this.$Message.success("操作成功！"),this.refreshHandleData()):this.$Message.error("操作失败！"+o.errorMsg);case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},mounted:function(){this.refreshHandleData(),this.refreshAuditDetail()}},P={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",e._l(e.query_cases,function(t,r){return n("Tag",[n("span",{style:{color:e.case_name===t.case_name?"red":""},on:{click:function(n){e.filterAuditData(t.case_name)}}},[e._v(e._s(t.case_name))])])})),e._v(" "),e._l(e.rowDatas,function(t){return n("div",{staticStyle:{border:"1px solid rgba(199,199,199,0.4)",margin:"5px",padding:"10px"}},[n("Row",[n("Scroll",{attrs:{height:"200"}},[n("Row",e._l(e.colNames,function(r,a){return n("Col",{attrs:{span:"12"}},[n("Tag",[e._v("字段名："+e._s(r))]),e._v(" "+e._s(t[r])+"\n          ")],1)}))],1),e._v(" "),n("div",e._l(e.update_cases,function(r){return e.update_cases?n("Tag",[r.case_name?n("span",{on:{click:function(n){e.handleOperate(r,t)}}},[e._v(e._s(r.case_name))]):e._e()]):e._e()}))],1)],1)}),e._v(" "),n("Page",{attrs:{total:e.total,"page-size":e.offset,"show-total":"","show-sizer":"",styles:{"text-align":"center","margin-top":"10px"}},on:{"on-change":e.handleChange,"on-page-size-change":e.handlePageSizeChange}})],2)},staticRenderFns:[]};var A={name:"AuditDetail",components:{AuditDetailHandle:n("VU/8")(O,P,!1,function(e){n("Qbkx")},"data-v-7dc9ea58",null).exports,AuditDetailTargetEdit:T,AuditDetailSourceEdit:b},data:function(){return{active_index:"active_index_1"}},methods:{currentTabChanged:function(e){this.active_index=e}}},E={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Tabs",{attrs:{animated:!1,name:"tab_level_1",value:e.active_index},on:{"on-click":e.currentTabChanged}},[n("TabPane",{attrs:{label:"配置数据来源",tab:"tab_level_1",name:"active_index_1"}},["active_index_1"==e.active_index?n("AuditDetailSourceEdit"):e._e()],1),e._v(" "),n("TabPane",{attrs:{label:"配置审核场景",tab:"tab_level_1",name:"active_index_2"}},["active_index_2"==e.active_index?n("AuditDetailTargetEdit"):e._e()],1),e._v(" "),n("TabPane",{attrs:{label:"数据审核",tab:"tab_level_1",name:"active_index_3"}},["active_index_3"==e.active_index?n("AuditDetailHandle"):e._e()],1)],1)],1)},staticRenderFns:[]};var D=n("VU/8")(A,E,!1,function(e){n("cmnH")},"data-v-efce1bac",null).exports;r.default.use(s.a);var q=[{path:"/",redirect:"/iwork/workList"},{path:"/iwork",component:function(){return n.e(6).then(n.bind(null,"GmnW"))},children:[{path:"moduleList",component:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"KbTn"))}},{path:"quartzList",component:function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,"NmtU"))}},{path:"appidList",component:function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,"AJwM"))}},{path:"resourceList",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"fCil"))}},{path:"workList",component:function(){return n.e(10).then(n.bind(null,"8mAf"))}},{path:"filterList",component:function(){return n.e(11).then(n.bind(null,"Bnus"))}},{path:"workstepList",component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"VUIs"))}},{path:"runLogList",component:function(){return n.e(17).then(n.bind(null,"bhVh"))}},{path:"runLogDetail",component:function(){return n.e(16).then(n.bind(null,"bBwu"))}},{path:"migrateList",component:function(){return n.e(18).then(n.bind(null,"l3nS"))}},{path:"editMigrate",component:function(){return n.e(13).then(n.bind(null,"Yc0m"))}},{path:"quickSql",component:function(){return n.e(5).then(n.bind(null,"KNcB"))}},{path:"format",component:function(){return n.e(12).then(n.bind(null,"9fZY"))}},{path:"globalVarList",component:function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"yTah"))}},{path:"dashboard",component:function(){return n.e(9).then(n.bind(null,"JHo/"))}},{path:"audit",component:k},{path:"audit_detail",component:D}]},{path:"/security",component:function(){return n.e(15).then(n.bind(null,"gtGb"))},children:[{path:"login",component:function(){return n.e(14).then(n.bind(null,"c86m"))}}]}],I=new s.a({routes:q,scrollBehavior:function(e,t,n){return n||{x:0,y:0}}}),C=n("IcnI"),M={mysql_datatypes:["varchar","char","text","float","int","date","datetime","decimal","double","bigint","binary","bit","blob","bool","boolean","enum","longblob","longtext","mediumblob","mediumint","mediumtext","numeric","real","set","smallint","time","timestamp","tinyblob","tinyint","tinytext","varbinary","year"]},N=n("BTaQ"),$=n.n(N),V=(n("+skl"),n("OS1Z")),L=n.n(V);n("pw1w");I.beforeEach(function(e,t,n){var r=localStorage.getItem("iwork_loginExpiredSecond");if(!Object(f.a)(localStorage.getItem("iwork_userName"))&&!Object(f.a)(localStorage.getItem("iwork_passwd"))&&null!=r&&(new Date).getTime()<r||-1!==e.path.indexOf("/security/login"))if(e.path.indexOf("/iwork/appidList")>=0||e.path.indexOf("/security/login")>=0)n();else{var a=localStorage.getItem("iwork_appId");null==a||void 0===a?(alert("请先选择 AppID"),n("/iwork/appidList")):n()}else n("/security/login")}),r.default.prototype.GLOBAL=M,r.default.use($.a),r.default.use(L.a),r.default.config.productionTip=!1,new r.default({el:"#app",router:I,components:{App:i},template:"<App/>",store:C.a})},Qbkx:function(e,t){},cZ3a:function(e,t){},cmnH:function(e,t){},gyMJ:function(e,t,n){"use strict";var r=n("fZjL"),a=n.n(r),i=n("//Fk"),s=n.n(i),o=n("mtWM"),u=n.n(o),c=n("mw3O"),l=n.n(c);function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return t=function(e){var t=localStorage.getItem("iwork_appId"),n=localStorage.getItem("iwork_tokenString");if(null!=t&&void 0!==t){var r=JSON.parse(t);e.app_id=r.id}return null!=n&&void 0!==n&&(e.tokenString=n),e}(t),new s.a(function(r,i){var s=void 0;if("GET"===n){var o="";a()(t).forEach(function(e){o+=e+"="+t[e]+"&"}),""!==o&&(o=o.substring(0,o.lastIndexOf("&")),e=e+"?"+o),s=u.a.get(e)}else s=u.a.post(e,l.a.stringify(t));s.then(function(e){r(e.data)}).catch(function(e){i(e)})})}n.d(t,"Z",function(){return f}),n.d(t,"_9",function(){return p}),n.d(t,"r",function(){return _}),n.d(t,"e",function(){return h}),n.d(t,"l",function(){return m}),n.d(t,"_0",function(){return k}),n.d(t,"_5",function(){return g}),n.d(t,"s",function(){return v}),n.d(t,"j",function(){return w}),n.d(t,"M",function(){return S}),n.d(t,"_11",function(){return b}),n.d(t,"F",function(){return y}),n.d(t,"B",function(){return x}),n.d(t,"u",function(){return T}),n.d(t,"i",function(){return O}),n.d(t,"_13",function(){return P}),n.d(t,"a",function(){return A}),n.d(t,"_6",function(){return E}),n.d(t,"v",function(){return D}),n.d(t,"w",function(){return q}),n.d(t,"V",function(){return I}),n.d(t,"R",function(){return C}),n.d(t,"k",function(){return M}),n.d(t,"d",function(){return N}),n.d(t,"c",function(){return $}),n.d(t,"z",function(){return V}),n.d(t,"J",function(){return L}),n.d(t,"L",function(){return R}),n.d(t,"_12",function(){return W}),n.d(t,"U",function(){return z}),n.d(t,"_4",function(){return B}),n.d(t,"b",function(){return U}),n.d(t,"t",function(){return j}),n.d(t,"A",function(){return F}),n.d(t,"N",function(){return H}),n.d(t,"_10",function(){return G}),n.d(t,"y",function(){return J}),n.d(t,"I",function(){return Q}),n.d(t,"S",function(){return Z}),n.d(t,"Y",function(){return Y}),n.d(t,"O",function(){return K}),n.d(t,"p",function(){return X}),n.d(t,"_14",function(){return ee}),n.d(t,"g",function(){return te}),n.d(t,"D",function(){return ne}),n.d(t,"X",function(){return re}),n.d(t,"q",function(){return ae}),n.d(t,"h",function(){return ie}),n.d(t,"E",function(){return se}),n.d(t,"C",function(){return oe}),n.d(t,"_7",function(){return ue}),n.d(t,"K",function(){return ce}),n.d(t,"_3",function(){return le}),n.d(t,"_8",function(){return de}),n.d(t,"P",function(){return fe}),n.d(t,"m",function(){return pe}),n.d(t,"_1",function(){return _e}),n.d(t,"n",function(){return he}),n.d(t,"_2",function(){return me}),n.d(t,"f",function(){return ke}),n.d(t,"x",function(){return ge}),n.d(t,"o",function(){return ve}),n.d(t,"G",function(){return we}),n.d(t,"H",function(){return Se}),n.d(t,"Q",function(){return be}),n.d(t,"T",function(){return ye}),n.d(t,"W",function(){return xe});var f=function(e,t,n){return d("/api/iwork/filterPageQuartz",{offset:e,current_page:t,search:n},"POST")},p=function(e,t){return d("/api/iwork/toggleQuartzStatus",{task_name:e,operate:t},"POST")},_=function(e){return d("/api/iwork/editQuartz",e,"POST")},h=function(e){return d("/api/iwork/deleteAppid",e,"POST")},m=function(e){return d("/api/iwork/editAppid",e,"POST")},k=function(e,t,n){return d("/api/iwork/queryPageAppIdList",{offset:e,current_page:t,search:n},"POST")},g=function(e,t,n){return d("/api/iwork/filterPageResource",{offset:e,current_page:t,search:n},"POST")},v=function(e,t,n,r,a,i,s){return d("/api/iwork/editResource",{resource_id:e,resource_name:t,resource_type:n,resource_url:r,resource_dsn:a,resource_username:i,resource_password:s},"POST")},w=function(e){return d("/api/iwork/deleteResource",{id:e},"POST")},S=function(e){return d("/api/iwork/getResourceById",{id:e},"POST")},b=function(e){return d("/api/iwork/validateResource",{id:e},"POST")},y=function(e){return d("/api/iwork/getAllResource",{resource_type:e},"POST")},x=function(e,t,n,r,a){return d("/api/iwork/filterPageWorks",{offset:e,current_page:t,search:n,search_work_type:r,search_module:a},"POST")},T=function(e,t,n,r,a,i){return d("/api/iwork/editWork",{work_id:e,work_name:t,work_desc:n,work_type:r,module_name:a,cache_result:i},"POST")},O=function(e,t){return d("/api/iwork/deleteOrCopyWorkById",{operate:e,id:t},"POST")},P=function(e){return d("/api/iwork/workStepList",{work_id:e},"POST")},A=function(e,t,n){return d("/api/iwork/addWorkStep",{work_id:e,work_step_id:t,work_step_meta:n},"POST")},E=function(e){return d("/api/iwork/runWork",{work_id:e},"POST")},D=function(e,t,n,r,a,i){return d("/api/iwork/editWorkStepBaseInfo",{work_id:e,work_step_id:t,work_step_name:n,work_step_desc:r,work_step_type:a,is_defer:i},"POST")},q=function(e,t,n,r){return d("/api/iwork/editWorkStepParamInfo",{work_id:e,work_step_id:t,paramInputSchemaStr:n,paramMappingsStr:r},"POST")},I=function(e,t){return d("/api/iwork/loadWorkStepInfo",{work_id:e,work_step_id:t},"POST")},C=function(e,t){return d("/api/iwork/loadPreNodeOutput",{work_id:e,work_step_id:t},"POST")},M=function(e,t){return d("/api/iwork/deleteWorkStepByWorkStepId",{work_id:e,work_step_id:t},"POST")},N=function(e,t){return d("/api/iwork/copyWorkStepByWorkStepId",{work_id:e,work_step_id:t},"POST")},$=function(e,t,n){return d("/api/iwork/changeWorkStepOrder",{work_id:e,work_step_id:t,type:n},"POST")},V=function(e,t,n,r){return d("/api/iwork/filterPageLogRecord",{work_id:e,logLevel:t,offset:n,current_page:r},"POST")},L=function(e){return d("/api/iwork/getLastRunlogDetail",{tracking_id:e},"POST")},R=function(e){return d("/api/iwork/getRelativeWork",{work_id:e},"POST")},W=function(e){return d("/api/iwork/validateWork",{work_id:e},"POST")},z=function(e){return d("/api/iwork/loadValidateResult",{work_id:e},"POST")},B=function(e,t,n){return d("/api/iwork/refactorWorkStepInfo",{work_id:e,refactor_worksub_name:t,selections:n},"POST")},U=function(e,t,n){return d("/api/iwork/batchChangeIndent",{work_id:e,mod:t,selections:n},"POST")},j=function(e,t,n){return d("/api/iwork/editSqlMigrate",{id:e,migrate_name:t,migrate_sql:n},"POST")},F=function(e,t){return d("/api/iwork/filterPageSqlMigrate",{offset:e,current_page:t},"POST")},H=function(e){return d("/api/iwork/getSqlMigrateInfo",{id:e},"POST")},G=function(e){return d("/api/iwork/toggleSqlMigrateEffective",{id:e},"POST")},J=function(e,t){return d("/api/iwork/executeMigrate",{resource_name:e,forceClean:t},"POST")},Q=function(e){return d("/api/iwork/getLastMigrateLogs",{trackingId:e},"POST")},Z=function(e){return d("/api/iwork/loadQuickSqlMeta",{resource_id:e},"POST")},Y=function(e,t){return d("/api/iwork/parseToMultiValue",{pureText:e,value:t},"POST")},K=function(e){return d("/api/iwork/globalVarList",{search:e},"POST")},X=function(e){return d("/api/iwork/editGlobalVar",e,"POST")},ee=function(){return d("/api/iwork/queryEvnNameList",{},"POST")},te=function(e){return d("/api/iwork/deleteGlobalVarById",{id:e},"POST")},ne=function(){return d("/api/iwork/getAllGlobalVars",{},"POST")},re=function(e,t,n){return d("/api/iwork/moduleList",{offset:e,current_page:t,search:n},"POST")},ae=function(e,t,n){return d("/api/iwork/editModule",{module_id:e,module_name:t,module_desc:n},"POST")},ie=function(e){return d("/api/iwork/deleteModuleById",{id:e},"POST")},se=function(){return d("/api/iwork/getAllModules",{},"POST")},oe=function(){return d("/api/iwork/getAllFiltersAndWorks",{},"POST")},ue=function(e,t,n){return d("/api/iwork/saveFilters",{filter_id:e,workNames:t,complexWorkName:n},"POST")},ce=function(e){return d("/api/iwork/getMetaInfo",{meta:e},"POST")},le=function(e){return d("/api/iwork/queryWorkDetail",{work_id:e},"POST")},de=function(){return d("/api/iwork/saveProject",{},"POST")},fe=function(){return d("/api/iwork/importProject",{},"POST")},pe=function(e){return d("/api/iwork/editAuditTask",e,"POST")},_e=function(e,t){return d("/api/iwork/queryPageAuditTask",{offset:e,current_page:t},"POST")},he=function(e){return d("/api/iwork/editAuditTaskSource",e,"POST")},me=function(e){return d("/api/iwork/queryTaskDetail",{task_name:e},"POST")},ke=function(e){return d("/api/iwork/deleteAuditTask",{task_name:e},"POST")},ge=function(e,t){return d("/api/iwork/executeAuditTask",{task_name:e,sql_str:t},"POST")},ve=function(e,t){return d("/api/iwork/editAuditTaskTarget",{task_name:e,update_cases:t},"POST")},we=function(e){return d("/api/iwork/getAuditHandleData",e,"POST")},Se=function(e){return d("/api/iwork/getDBMonitorMeta",e,"POST")},be=function(e){return d("/api/iwork/loadDBMonitorData",e,"POST")},ye=function(e){return d("/api/iwork/loadRecordParamData",e,"POST")},xe=function(e){return d("/api/iwork/login",e,"POST")}},nF77:function(e,t){},oEVe:function(e,t){},pw1w:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.7c1782b816377f1f6ace.js.map