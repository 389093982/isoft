{"version":3,"sources":["webpack:///src/components/IWork/IMigrate/MigrateList.vue","webpack:///./src/components/IWork/IMigrate/MigrateList.vue?bacb","webpack:///./src/components/IWork/IMigrate/MigrateList.vue"],"names":["MigrateList","name","data","_this2","this","cysqls","label","sqls","tabVal","logs","timer","currentResourceName","resources","migrates","current_page","total","offset","columns1","title","key","width","render","h","params","style","color","index","fixed","props","type","size","marginRight","on","click","editMigrate","toggleMigrateEffective","methods","handleCopy","sql","_this","Object","tools","$Message","success","refreshMigrateList","_ref","asyncToGenerator_default","regenerator_default","a","mark","_callee","result","wrap","_context","prev","next","api","sent","paginator","totalcount","stop","apply","arguments","handleChange","page","handlePageSizeChange","pageSize","id","routeData","undefined","$router","resolve","path","query","window","open","href","refreshMigrateLogs","_ref2","_callee2","trackingId","_context2","status","over","clearInterval","_x","executeMigrate","_ref3","_callee3","forceClean","_context3","setInterval","_x2","_ref4","_callee4","_context4","error","_x3","renderBr","str","replace","mounted","IMigrate_MigrateList","_vm","_h","$createElement","_c","_self","staticStyle","margin-bottom","attrs","span","$event","_v","model","value","callback","$$v","expression","_l","resource","resource_name","_s","resource_dsn","border","columns","height","migrate","border-bottom","padding","domProps","innerHTML","migrate_sql","text-align","background-color","border-radius","cysql","cursor","log","tracking_detail","page-size","show-total","show-sizer","styles","margin-top","on-change","on-page-size-change","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/iwork/js/17.ea571d1cb8132afabc7d.js","sourcesContent":["<template>\r\n  <div>\r\n    <Row style=\"margin-bottom: 10px;\">\r\n      <Col span=\"10\">\r\n        <Button type=\"success\" size=\"small\" @click=\"editMigrate(null)\" style=\"margin-bottom: 6px\">新建迁移</Button>\r\n      </Col>\r\n      <Col span=\"14\">\r\n        <Select v-model=\"currentResourceName\" style=\"width:300px\">\r\n          <Option v-for=\"resource in resources\" :value=\"resource.resource_name\">\r\n            {{ resource.resource_name }} - {{ resource.resource_dsn }}\r\n          </Option>\r\n        </Select>\r\n        <Button type=\"success\" size=\"small\" @click=\"executeMigrate(false)\" style=\"margin-bottom: 6px\">执行迁移</Button>\r\n        <Button type=\"success\" size=\"small\" @click=\"executeMigrate(true)\" style=\"margin-bottom: 6px\">清理DB并执行迁移</Button>\r\n      </Col>\r\n    </Row>\r\n\r\n    <Tabs :value=\"tabVal\">\r\n      <TabPane label=\"列表\" name=\"lst\">\r\n        <Table border :columns=\"columns1\" :data=\"migrates\" size=\"small\"></Table>\r\n      </TabPane>\r\n      <TabPane label=\"预览\" name=\"views\">\r\n        <Scroll height=\"450\">\r\n          <div v-for=\"migrate in migrates\" style=\"border-bottom: 1px solid green;padding: 10px;\">\r\n            <Row>\r\n              <Col span=\"1\"><span style=\"color:red;\">{{migrate.id}}</span></Col>\r\n              <Col span=\"23\"><span v-html=\"renderBr(migrate.migrate_sql)\"></span></Col>\r\n            </Row>\r\n          </div>\r\n        </Scroll>\r\n      </TabPane>\r\n      <TabPane label=\"常用语句\" name=\"cy\">\r\n        <div style=\"text-align: center;\"><span style=\"padding: 5px 10px;background-color: #eee;border-radius: 5px;\">温馨提示:点击 sql 即可复制，使用前请自行格式化</span></div>\r\n        <div v-for=\"(cysql,index) in cysqls\">\r\n          <p style=\"color: red;\">{{cysql.label}}</p>\r\n          <p v-for=\"(sql, index) in cysql.sqls\" style=\"cursor: pointer;\" @click=\"handleCopy(sql)\" v-html=\"renderBr(sql)\"></p>\r\n        </div>\r\n      </TabPane>\r\n      <TabPane label=\"执行日志\" name=\"log\">\r\n        <Scroll height=\"450\">\r\n          <p v-for=\"log in logs\" :style=\"{color: log.status ? 'grey' : 'red'}\">{{log.tracking_detail}}</p>\r\n        </Scroll>\r\n      </TabPane>\r\n    </Tabs>\r\n\r\n    <Page :total=\"total\" :page-size=\"offset\" show-total show-sizer :styles=\"{'text-align': 'center','margin-top': '10px'}\"\r\n          @on-change=\"handleChange\" @on-page-size-change=\"handlePageSizeChange\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {ExecuteMigrate, FilterPageSqlMigrate, GetLastMigrateLogs, ToggleSqlMigrateEffective} from \"../../../api\"\r\n  import {copyText} from \"../../../tools\";\r\n\r\n  export default {\r\n    name: \"MigrateList\",\r\n    data(){\r\n      return {\r\n        cysqls: [{\r\n            'label': '互换两列主键 id',\r\n            'sqls': [\r\n              'UPDATE course_video a JOIN course_video b ON(a.id = ? AND b.id = ?) OR (a.id = ? AND b.id = ?) SET a.video_name = b.video_name, b.video_name = a.video_name, a.first_play = b.first_play, b.first_play = a.first_play, a.second_play = b.second_play, b.second_play = a.second_play;'\r\n            ],\r\n          },\r\n          {\r\n            'label': '删除列',\r\n            'sqls': [\r\n              'alter table course_video drop column video_number;'\r\n            ],\r\n          }, {\r\n            'label': '添加列',\r\n            'sqls': [\r\n              'alter table user add column nick_name varchar(255) COLLATE utf8_bin NOT NULL DEFAULT \\'\\';',\r\n              'alter table blog_article add column to_top int(11) NOT NULL DEFAULT -1;',\r\n            ],\r\n          },\r\n          {\r\n            'label': '创建表',\r\n            'sqls': [\r\n              'CREATE TABLE `verify_code`( `user_name` VARCHAR(255) COLLATE utf8_bin NOT NULL DEFAULT \\'\\' COMMENT \\'用户名\\', \\n`verify_code` INT(11) NOT NULL DEFAULT -1 COMMENT \\'验证码\\', \\nverify_code_expired DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT \\'验证码过期时间\\', \\nPRIMARY KEY (`user_name`)) ENGINE=INNODB AUTO_INCREMENT=26 DEFAULT CHARSET=utf8 COLLATE=utf8_bin;'\r\n            ],\r\n          },\r\n          {\r\n            'label': '插入或更新',\r\n            'sqls': [\r\n              'INSERT INTO test VALUES (1,\\'b4\\',\\'c4\\') ON DUPLICATE KEY UPDATE b=VALUES(b),c=VALUES(c);'\r\n            ],\r\n          },\r\n          {\r\n            'label': '获取表自增 id',\r\n            'sqls': [\r\n              'SELECT AUTO_INCREMENT FROM information_schema.tables WHERE  table_schema = \\'isoft_linkknown\\' AND table_name=\\'book_catalog\\';'\r\n            ],\r\n          }],\r\n        tabVal:'lst',\r\n        logs:[],\r\n        timer:'',\r\n        currentResourceName:'',\r\n        resources:[],\r\n        migrates:[],\r\n        // 当前页\r\n        current_page:1,\r\n        // 总数\r\n        total:0,\r\n        // 每页记录数\r\n        offset:10,\r\n        columns1: [\r\n          {\r\n            title: 'id',\r\n            key: 'id',\r\n            width: 100,\r\n          },\r\n          {\r\n            title: 'migrate_name',\r\n            key: 'migrate_name',\r\n            width: 350,\r\n          },\r\n          {\r\n            title: 'effective',\r\n            key: 'effective',\r\n            width: 100,\r\n            render: (h, params) => {\r\n              return h('span', {\r\n                style:{\r\n                  color: this.migrates[params.index]['effective'] ? \"blue\" : \"grey\",\r\n                }\r\n              }, this.migrates[params.index]['effective'] ? \"生效\" : \"失效\");\r\n            }\r\n          },\r\n          {\r\n            title: 'migrate_hash',\r\n            key: 'migrate_hash',\r\n          },\r\n          {\r\n            title: '操作',\r\n            key: 'operate',\r\n            width: 180,\r\n            fixed: 'right',\r\n            render: (h, params) => {\r\n              return h('div', [\r\n                h('Button', {\r\n                  props: {\r\n                    type: 'success',\r\n                    size: 'small'\r\n                  },\r\n                  style: {\r\n                    marginRight: '5px',\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      this.editMigrate(this.migrates[params.index]['id']);\r\n                    }\r\n                  }\r\n                }, '编辑'),\r\n                h('Button', {\r\n                  props: {\r\n                    type: 'info',\r\n                    size: 'small'\r\n                  },\r\n                  style: {\r\n                    marginRight: '5px',\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      this.toggleMigrateEffective(this.migrates[params.index]['id']);\r\n                    }\r\n                  }\r\n                }, '生效/失效'),\r\n              ]);\r\n            }\r\n          }\r\n        ],\r\n      }\r\n    },\r\n    methods:{\r\n      handleCopy: function (sql) {\r\n        var _this = this;\r\n        copyText(sql, function () {\r\n          _this.$Message.success(\"复制成功！\");\r\n        });\r\n      },\r\n      refreshMigrateList: async function(){\r\n        const result = await FilterPageSqlMigrate(this.offset, this.current_page);\r\n        this.migrates = result.migrates;\r\n        this.resources = result.resources;\r\n        this.total = result.paginator.totalcount;\r\n      },\r\n      handleChange(page){\r\n        this.current_page = page;\r\n        this.refreshMigrateList();\r\n      },\r\n      handlePageSizeChange(pageSize){\r\n        this.offset = pageSize;\r\n        this.refreshMigrateList();\r\n      },\r\n      editMigrate:function (id) {\r\n        var routeData;\r\n        if(id != undefined && id != null){\r\n          routeData = this.$router.resolve({ path: '/iwork/editMigrate', query: {id: id}});\r\n        }else{\r\n          routeData = this.$router.resolve({ path: '/iwork/editMigrate'});\r\n        }\r\n        // 打开新窗口跳转\r\n        window.open(routeData.href, '_blank');\r\n      },\r\n      refreshMigrateLogs:async function(trackingId){\r\n        const result = await GetLastMigrateLogs(trackingId);\r\n        if(result.status == \"SUCCESS\"){\r\n          this.logs = result.logs;\r\n          if(result.over == true){\r\n            clearInterval(this.timer);\r\n          }\r\n        }\r\n      },\r\n      executeMigrate: async function (forceClean) {\r\n        this.tabVal = 'log';\r\n        const result = await ExecuteMigrate(this.currentResourceName, forceClean);\r\n        if(result.status == \"SUCCESS\"){\r\n          var _this = this;\r\n          _this.timer = setInterval(function () {\r\n            _this.refreshMigrateLogs(result.trackingId);\r\n          }, 1000);\r\n        }\r\n      },\r\n      toggleMigrateEffective:async function (id) {\r\n        const result = await ToggleSqlMigrateEffective(id);\r\n        if(result.status == \"SUCCESS\"){\r\n          this.$Message.success(\"操作成功!\");\r\n          this.refreshMigrateList();\r\n        }else{\r\n          this.$Message.error(\"操作失败!\");\r\n        }\r\n      },\r\n      renderBr:function (str) {\r\n        return str.replace(/\\n/g,\"<br>\");\r\n      }\r\n    },\r\n    mounted(){\r\n      this.refreshMigrateList();\r\n    },\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/IWork/IMigrate/MigrateList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Row',{staticStyle:{\"margin-bottom\":\"10px\"}},[_c('Col',{attrs:{\"span\":\"10\"}},[_c('Button',{staticStyle:{\"margin-bottom\":\"6px\"},attrs:{\"type\":\"success\",\"size\":\"small\"},on:{\"click\":function($event){_vm.editMigrate(null)}}},[_vm._v(\"新建迁移\")])],1),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"14\"}},[_c('Select',{staticStyle:{\"width\":\"300px\"},model:{value:(_vm.currentResourceName),callback:function ($$v) {_vm.currentResourceName=$$v},expression:\"currentResourceName\"}},_vm._l((_vm.resources),function(resource){return _c('Option',{attrs:{\"value\":resource.resource_name}},[_vm._v(\"\\n          \"+_vm._s(resource.resource_name)+\" - \"+_vm._s(resource.resource_dsn)+\"\\n        \")])})),_vm._v(\" \"),_c('Button',{staticStyle:{\"margin-bottom\":\"6px\"},attrs:{\"type\":\"success\",\"size\":\"small\"},on:{\"click\":function($event){_vm.executeMigrate(false)}}},[_vm._v(\"执行迁移\")]),_vm._v(\" \"),_c('Button',{staticStyle:{\"margin-bottom\":\"6px\"},attrs:{\"type\":\"success\",\"size\":\"small\"},on:{\"click\":function($event){_vm.executeMigrate(true)}}},[_vm._v(\"清理DB并执行迁移\")])],1)],1),_vm._v(\" \"),_c('Tabs',{attrs:{\"value\":_vm.tabVal}},[_c('TabPane',{attrs:{\"label\":\"列表\",\"name\":\"lst\"}},[_c('Table',{attrs:{\"border\":\"\",\"columns\":_vm.columns1,\"data\":_vm.migrates,\"size\":\"small\"}})],1),_vm._v(\" \"),_c('TabPane',{attrs:{\"label\":\"预览\",\"name\":\"views\"}},[_c('Scroll',{attrs:{\"height\":\"450\"}},_vm._l((_vm.migrates),function(migrate){return _c('div',{staticStyle:{\"border-bottom\":\"1px solid green\",\"padding\":\"10px\"}},[_c('Row',[_c('Col',{attrs:{\"span\":\"1\"}},[_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(_vm._s(migrate.id))])]),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"23\"}},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.renderBr(migrate.migrate_sql))}})])],1)],1)}))],1),_vm._v(\" \"),_c('TabPane',{attrs:{\"label\":\"常用语句\",\"name\":\"cy\"}},[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('span',{staticStyle:{\"padding\":\"5px 10px\",\"background-color\":\"#eee\",\"border-radius\":\"5px\"}},[_vm._v(\"温馨提示:点击 sql 即可复制，使用前请自行格式化\")])]),_vm._v(\" \"),_vm._l((_vm.cysqls),function(cysql,index){return _c('div',[_c('p',{staticStyle:{\"color\":\"red\"}},[_vm._v(_vm._s(cysql.label))]),_vm._v(\" \"),_vm._l((cysql.sqls),function(sql,index){return _c('p',{staticStyle:{\"cursor\":\"pointer\"},domProps:{\"innerHTML\":_vm._s(_vm.renderBr(sql))},on:{\"click\":function($event){_vm.handleCopy(sql)}}})})],2)})],2),_vm._v(\" \"),_c('TabPane',{attrs:{\"label\":\"执行日志\",\"name\":\"log\"}},[_c('Scroll',{attrs:{\"height\":\"450\"}},_vm._l((_vm.logs),function(log){return _c('p',{style:({color: log.status ? 'grey' : 'red'})},[_vm._v(_vm._s(log.tracking_detail))])}))],1)],1),_vm._v(\" \"),_c('Page',{attrs:{\"total\":_vm.total,\"page-size\":_vm.offset,\"show-total\":\"\",\"show-sizer\":\"\",\"styles\":{'text-align': 'center','margin-top': '10px'}},on:{\"on-change\":_vm.handleChange,\"on-page-size-change\":_vm.handlePageSizeChange}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2bc0d78e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/IWork/IMigrate/MigrateList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2bc0d78e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MigrateList.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./MigrateList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./MigrateList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2bc0d78e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./MigrateList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2bc0d78e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/IWork/IMigrate/MigrateList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}