webpackJsonp([1,19],{"7fRg":function(t,e){},"7tHR":function(t,e){},"9Bh1":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r("Xxa5"),n=r.n(a),o=r("exGp"),s=r.n(o),i=r("I1g2"),l=r("gyMJ"),p=r("GCuT"),u={name:"WorkValidate",components:{ISimpleBtnTriggerModal:i.a},props:{work_id:{type:Number,default:-1}},data:function(){var t=this;return{showDetailDialog:!1,validating:!1,validateDetails:[],tracking_id:"",columns1:[{title:"work_name",key:"work_name"},{title:"work_step_name",key:"work_step_name"},{title:"detail",key:"detail",width:500,render:function(e,r){return e("span",{style:{color:Object(p.a)(t.validateDetails[r.index].work_step_name)?"green":"red",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},attrs:{title:t.validateDetails[r.index].detail}},t.validateDetails[r.index].detail)}},{title:"操作",key:"operate",render:function(e,r){return e("div",[e("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.$Modal.confirm({title:"确认",width:1e3,content:r.row.detail})}}},"详情")])}}]}},methods:{validateWork:function(){var t=s()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=this.validating){t.next=4;break}this.$Message.error("校验中,请稍后！"),t.next=10;break;case 4:return this.validating=!0,t.next=7,Object(l._20)(this.work_id);case 7:"SUCCESS"==t.sent.status&&this.refreshValidateResult(),this.validating=!1;case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),refreshValidateResult:function(){var t=s()(n.a.mark(function t(){var e;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l._0)(this.work_id);case 2:"SUCCESS"==(e=t.sent).status?(this.validateDetails=e.details,this.tracking_id=e.details[0].tracking_id):this.$Message.error(e.errorMsg);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},c={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ISimpleBtnTriggerModal",{ref:"triggerModal",attrs:{"btn-text":"项目校验","btn-size":"small","modal-title":"查看校验结果","modal-width":1e3,"modal-top":"50px"}},[r("Button",{attrs:{type:"success",size:"small"},on:{click:t.validateWork}},[t._v("校验")]),t._v(" "),r("Button",{attrs:{type:"success",size:"small"},on:{click:t.refreshValidateResult}},[t._v("刷新校验结果")]),t._v(" "),r("div",{staticStyle:{margin:"20px","min-height":"300px"}},[r("p",{staticStyle:{color:"green"}},[t._v("last tracking_id: "+t._s(t.tracking_id))]),t._v(" "),r("Scroll",{attrs:{height:"350"}},[r("Table",{attrs:{border:"",columns:t.columns1,data:t.validateDetails,size:"small"}})],1)],1)],1)},staticRenderFns:[]};var d=r("VU/8")(u,c,!1,function(t){r("7fRg")},"data-v-6794fa71",null);e.default=d.exports},EJtF:function(t,e){},FlG4:function(t,e){},Gu7T:function(t,e,r){"use strict";e.__esModule=!0;var a,n=r("c/Tr"),o=(a=n)&&a.__esModule?a:{default:a};e.default=function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return(0,o.default)(t)}},K060:function(t,e){},MQaT:function(t,e){},MrAK:function(t,e){},Pu5m:function(t,e){},Tx0V:function(t,e){},"UIi+":function(t,e){},VUIs:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r("fZjL"),n=r.n(a),o=r("mvHQ"),s=r.n(o),i=r("Xxa5"),l=r.n(i),p=r("exGp"),u=r.n(p),c=r("gyMJ"),d=r("I1g2"),h=r("GCuT"),f={name:"ParamInputEditDataSource",props:{prePosTreeNodeArr:{type:Array,default:[]}},data:function(){return{current_tab:"tab_output",funcs:[]}},methods:{getChooseDatas:function(t){return"tab_output"==this.current_tab?this.getChooseDatasWithOutput(t):this.getChooseDatasWithFuncs()},getChooseDatasWithOutput:function(t){for(var e=[],r=this.$refs.tree1.getCheckedAndIndeterminateNodes(),a=0;a<r.length;a++){var n=r[a];if(-1!=n.title.indexOf("$")){var o=this.getChooseDataWithPrefix(n.title,n,t);e=Object(h.f)(e,o)}}return e},getChooseDataWithPrefix:function(t,e,r){var a=[];if(null==e.children)0==e.indeterminate&&e.checked&&a.push(t+";\n");else{var n=e.children;if("parent"==r&&0==e.indeterminate)e.checked&&a.push(t+";\n");else for(var o=0;o<n.length;o++){var s=n[o],i=this.getChooseDataWithPrefix(t+"."+s.title,s,r);a=Object(h.f)(a,i)}}return a},getChooseDatasWithFuncs:function(){var t=this.$refs.tree2.getCheckedAndIndeterminateNodes();return t.length>0?(t.length>1&&this.$Message.warning("只有第一个有效！"),t[0].title+";\n"):null},currentTabChanged:function(t){this.current_tab=t},renderContent:function(t,e){var r=this,a=e.root,n=e.node,o=e.data;return t("span",{style:{display:"inline-block",width:"100%"},attrs:{draggable:"true"},on:{dragstart:function(){return r.handleDragStart(a,n,o)}}},[t("span",[t("span",o.title)])])},handleDragStart:function(t,e,r){var a=window.event||arguments[0],n=function(t,e){if(t.find(function(t){return t===e})){var r=t.find(function(t){return t===e}).parent;if(null!=r)return parent=t.find(function(t){return t.nodeKey===r}),parent}return null};r=function t(e,r){var a=n(e,r);return null==a?r.node.title:t(e,a)+"."+r.node.title}(t,e)+";\n";a.dataTransfer.setData("Text",r)},refreshFuncCallers:function(){var t=u()(l.a.mark(function t(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.S)("funcCallers");case 2:"SUCCESS"==(e=t.sent).status&&(this.funcs=e.funcCallers);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},computed:{data1:function(){for(var t=function t(e,r){if(null!=e.NodeChildrens&&e.NodeChildrens.length>0){for(var a=[],n=0;n<e.NodeChildrens.length;n++){var o=e.NodeChildrens[n],s={title:o.NodeName,expand:!1};t(o,s),a.push(s)}r.children=a}},e=[],r=0;r<this.prePosTreeNodeArr.length;r++){var a=this.prePosTreeNodeArr[r],n={title:a.NodeName,expand:!1};t(a,n),e.push(n)}return e},data2:function(){for(var t=[],e=0;e<this.funcs.length;e++)t.push({title:this.funcs[e].funcDemo});return t}},mounted:function(){this.refreshFuncCallers()}},m={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Tabs",{attrs:{type:"card",name:"tab_dataSource",value:t.current_tab,animated:!1},on:{"on-click":t.currentTabChanged}},[r("TabPane",{attrs:{label:"前置节点输出参数",name:"tab_output",tab:"tab_dataSource"}},[r("Scroll",{attrs:{height:"400"}},[t.data1?r("Tree",{ref:"tree1",attrs:{data:t.data1,"show-checkbox":"",render:t.renderContent}}):t._e()],1)],1),t._v(" "),r("TabPane",{attrs:{label:"快捷函数",name:"tab_funcs",tab:"tab_dataSource"}},[r("Scroll",{attrs:{height:"400"}},[r("ul",[t.data2?r("Tree",{ref:"tree2",attrs:{data:t.data2,"show-checkbox":"",render:t.renderContent}}):t._e()],1)])],1)],1)},staticRenderFns:[]};var _=r("VU/8")(f,m,!1,function(t){r("lSkx")},"data-v-18efad12",null).exports,w={name:"ParamInputEditDialog",components:{ISimpleBtnTriggerModal:d.a,ParamInputEditDataSource:_},props:{paramInputSchemaItems:{type:Array,default:function(){return[]}}},data:function(){return{showFormModal:!1,inputLabel:"",oldPureText:!1,pureText:!1,oldInputTextData:"",inputTextData:"",ParamNamings:[],showMultiVals:!1,multiVals:[],paramIndex:1,prePosTreeNodeArr:[],variables:[],variablesShowEdit:[],variableConcats:"",editProgress:0}},methods:{handlePlaceholderDrop:function(t,e){t.stopPropagation(),t.preventDefault();var r=t.dataTransfer.getData("Text");this.variables[e]=r.substr(0,r.lastIndexOf(";\n")),this.handleRefillInputTextData()},handleRefillInputTextData:function(){for(var t=this.variableConcats,e=0;e<this.variables.length;e++)t=t.replace("__sep__",this.variables[e]);this.inputTextData=t},handleInputDrop:function(){var t=window.event||arguments[0];t.stopPropagation(),t.preventDefault();var e=t.dataTransfer.getData("Text");this.inputTextData=this.inputTextData+e},handleDragover:function(){(window.event||arguments[0]).preventDefault()},parseToMultiValue:function(){var t=u()(l.a.mark(function t(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c._3)(this.pureText,this.inputTextData);case 2:"SUCCESS"==(e=t.sent).status?(this.showMultiVals=!this.showMultiVals,this.multiVals=e.multiVals):this.$Message.error("提交失败!"+e.errorMsg);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),handleReload:function(t,e){var r=this;this.checkDrity()?this.$Modal.confirm({title:"确认",content:"是否需要保存上一步操作?",onOk:function(){r.handleSubmit(function(){r.$emit("handleReload",t,e)})}}):this.$emit("handleReload",t,e)},refreshEditProgress:function(){for(var t=0,e=0;e<this.paramInputSchemaItems.length;e++)(!Object(h.a)(this.paramInputSchemaItems[e].ParamValue)||this.paramInputSchemaItems[e].ParamName.indexOf("?")>0)&&t++;this.editProgress=Math.floor(t/this.paramInputSchemaItems.length*100)},refreshParamInput:function(t,e,r){this.showFormModal=!0,this.item=e,this.paramIndex=t,this.inputLabel=e.ParamName,this.pureText=e.PureText,this.inputTextData=e.ParamValue,this.ParamNamings=Object(h.i)(e.ParamNamings,","),this.showMultiVals=!1,this.clearDirty(),1==r&&this.refreshPreNodeOutput(),this.refreshEditProgress()},closeModal:function(){this.showFormModal=!1},clearDirty:function(){this.oldInputTextData=this.inputTextData,this.oldPureText=this.pureText},checkDrity:function(){return this.oldInputTextData!=this.inputTextData||this.oldPureText!=this.pureText},handleSubmit:function(t){this.$emit("handleSubmit",this.inputLabel,this.inputTextData,this.pureText),this.clearDirty(),null!=t&&void 0!=t&&"function"==typeof t&&t()},refreshPreNodeOutput:function(){var t=u()(l.a.mark(function t(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.Y)(this.$store.state.current_work_id,this.$store.state.current_work_step_id);case 2:"SUCCESS"==(e=t.sent).status&&(this.prePosTreeNodeArr=e.prePosTreeNodeArr);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),appendData:function(t){var e=this.$refs.paramInputEditDataSource.getChooseDatas(t);if(Array.isArray(e))for(var r=0;r<e.length;r++)this.inputTextData=this.inputTextData+e[r];else this.inputTextData=this.inputTextData+e},deleteVariable:function(t){this.variables[t]="",this.handleRefillInputTextData()},editVariable:function(t){if(0==this.variablesShowEdit[t])this.$set(this.variablesShowEdit,t,!0);else{this.$set(this.variablesShowEdit,t,!1);var e=document.getElementById("variablesShowEdit_"+t).value;this.$set(this.variables,t,1==Object(h.a)(e)?this.variables[t]:e),this.handleRefillInputTextData()}}},watch:{inputTextData:function(t){if(this.variables=Object(h.d)(this.inputTextData,/\$[a-zA-Z0-9_]+(\.[a-zA-Z0-9_]+)*/g),this.variableConcats=this.inputTextData,null!=this.variables){for(var e=0;e<this.variables.length;e++)this.variableConcats=this.variableConcats.replace(this.variables[e],"__sep__");for(e=0;e<this.variables.length;e++)this.variablesShowEdit[e]=!1}}}},k={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Modal",{attrs:{width:"1200",title:"查看/编辑 workstep 参数","footer-hide":!0,transfer:!1,"mask-closable":!1,styles:{top:"20px"}},model:{value:t.showFormModal,callback:function(e){t.showFormModal=e},expression:"showFormModal"}},[r("Row",[r("Col",{attrs:{span:"6"}},[r("ParamInputEditDataSource",{ref:"paramInputEditDataSource",attrs:{"pre-pos-tree-node-arr":t.prePosTreeNodeArr}})],1),t._v(" "),r("Col",{staticStyle:{"text-align":"center"},attrs:{span:"3"}},[r("i-circle",{attrs:{percent:t.editProgress,size:85}},[t._v("\n        编辑进度\n        "),r("span",{staticClass:"demo-Circle-inner",staticStyle:{"font-size":"24px"}},[t._v(t._s(t.editProgress)+"%")])]),t._v(" "),r("Button",{staticStyle:{"margin-top":"10px"},on:{click:function(e){t.appendData("parent")}}},[r("Icon",{attrs:{type:"ios-arrow-forward"}}),t._v("选择父节点")],1),t._v(" "),r("Button",{staticStyle:{"margin-top":"10px"},on:{click:function(e){t.appendData("children")}}},[r("Icon",{attrs:{type:"ios-arrow-forward"}}),t._v("选择子节点")],1),t._v(" "),r("Dropdown",{staticStyle:{"margin-top":"200px"},attrs:{trigger:"hover"}},[r("Button",[t._v("\n          输入列表  \n          "),r("Icon",{attrs:{type:"ios-arrow-forward"}})],1),t._v(" "),r("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[r("Scroll",{attrs:{height:"300"}},t._l(t.paramInputSchemaItems,function(e,a){return r("DropdownItem",[r("Button",{attrs:{type:e.ParamValue?"default":"text",long:"",size:"small"},on:{click:function(e){t.handleReload(a,!1)}}},[t._v("\n                "+t._s(e.ParamName)+"   "),t.paramIndex==a?r("Badge",{attrs:{status:"processing"}}):t._e()],1)],1)}))],1)],1)],1),t._v(" "),r("Col",{attrs:{span:"15"}},[r("div",{staticStyle:{"margin-bottom":"5px"}},[r("span",{staticStyle:{color:"#657180","font-size":"14px"}},[t._v("\n          (参数索引-"+t._s(t.paramIndex)),t.inputLabel.indexOf("?")>0?r("span",[t._v("可选参数")]):t._e(),t._v(") - "+t._s(t.inputLabel)+"\n        ")]),t._v(" "),r("Checkbox",{model:{value:t.pureText,callback:function(e){t.pureText=e},expression:"pureText"}},[t._v("纯文本值")]),t._v(" "),r("Button",{attrs:{type:"info",size:"small"},on:{click:function(e){t.parseToMultiValue()}}},[t._v("多值预览")]),t._v(" "),r("router-link",{attrs:{to:{path:"/iwork/quickSql"},tag:"a",target:"_blank"}},[r("Button",{attrs:{type:"warning",size:"small"}},[t._v("辅助工具")])],1)],1),t._v(" "),t.showMultiVals?r("div",{staticStyle:{"margin-top":"20px"}},[r("Scroll",{attrs:{height:"350"}},[r("table",{staticStyle:{width:"100%"}},t._l(t.multiVals,function(e,a){return r("tr",[r("td",{staticStyle:{width:"10%"}},[r("p",[t._v("参数 "+t._s(a)+" ")]),t._v(" "),t.ParamNamings&&a<t.ParamNamings.length?r("p",{staticStyle:{color:"green"}},[t._v(t._s(t.ParamNamings[a]))]):t._e()]),t._v(" "),r("td",[r("Input",{attrs:{type:"textarea",value:e,readonly:!0}})],1)])}))])],1):r("div",[r("Input",{attrs:{type:"textarea",rows:12,placeholder:"Enter something..."},nativeOn:{drop:function(e){return t.handleInputDrop(e)},dragover:function(e){return t.handleDragover(e)}},model:{value:t.inputTextData,callback:function(e){t.inputTextData=e},expression:"inputTextData"}}),t._v(" "),r("p",{staticStyle:{"margin-top":"5px"}},[t._v("变量占位符")]),t._v(" "),r("Scroll",{attrs:{height:"100"}},t._l(t.variables,function(e,a){return r("Tag",{staticStyle:{"margin-right":"10px"},attrs:{color:"default"},nativeOn:{drop:function(e){t.handlePlaceholderDrop(e,a)},dragover:function(e){return t.handleDragover(e)}}},[t._v(t._s(e)+"\n               "),r("Icon",{staticStyle:{"margin-left":"10px"},attrs:{type:"ios-close"},on:{click:function(e){t.deleteVariable(a)}}}),t._v(" "),r("Icon",{staticStyle:{"margin-left":"10px"},attrs:{type:"md-create"},on:{click:function(e){t.editVariable(a)}}}),t._v(" "),r("span",[r("input",{directives:[{name:"show",rawName:"v-show",value:1==t.variablesShowEdit[a],expression:"variablesShowEdit[index] == true"}],attrs:{type:"text",id:"variablesShowEdit_"+a}})])],1)})),t._v(" "),r("Row",{staticStyle:{"text-align":"right","margin-top":"10px"}},[r("Button",{attrs:{type:"success",size:"small"},on:{click:t.handleSubmit}},[t._v("提交")]),t._v(" "),r("Button",{attrs:{type:"info",size:"small"},on:{click:t.closeModal}},[t._v("Close")])],1)],1)])],1)],1)},staticRenderFns:[]};var v={name:"ParamInputEdit",components:{ParamInputEditDialog:r("VU/8")(w,k,!1,function(t){r("ZyFn")},"data-v-0d065c24",null).exports},props:{workId:{type:Number,default:-1},workStepId:{type:Number,default:-1},paramInputSchemaItems:{type:Array,default:function(){return[]}}},data:function(){return{validateErrors:[]}},methods:{handleReload:function(t,e){if(t>=0&&t<=this.paramInputSchemaItems.length-1){var r=this.paramInputSchemaItems[t];this.$refs.paramInputEditDialog.refreshParamInput(t,r,e)}},refreshParamInputSchemaItems:function(t,e,r){for(var a=0;a<this.paramInputSchemaItems.length;a++){var n=this.paramInputSchemaItems[a];n.ParamName==t&&(n.ParamValue=e,n.PureText=r,this.$set(this.paramInputSchemaItems,a,n),this.$Message.success("临时参数保存成功!"))}},showParamDesc:function(t){this.$Modal.info({title:"使用说明",content:t})},refreshWorkValidateDetail:function(){var t=u()(l.a.mark(function t(){var e,r,a=this;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c._0)(this.workId);case 2:"SUCCESS"==(e=t.sent).status?(r=e.details,this.validateErrors=r.filter(function(t){return a.workId==t.work_id&&a.workStepId==t.work_step_id})):this.$Message.error(e.errorMsg);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getValidateErrors:function(t){return this.validateErrors.filter(function(e){return e.param_name==t}).map(function(t){return t.detail}).join(",")}}},g={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("table",[t._l(t.paramInputSchemaItems,function(e,a){return r("div",[r("tr",[r("td",[r("div",{staticStyle:{width:"150px",color:"green","text-align":"right","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"},attrs:{title:e.ParamName}},[t._v("\n            "+t._s(e.ParamName)+"\n          ")])]),t._v(" "),r("td",[r("Icon",{staticStyle:{"margin-left":"3px"},attrs:{type:"ios-book-outline",size:"18"},on:{click:function(r){t.showParamDesc(e.ParamDesc)}}}),t._v(" "),e.ParamChoices?r("Select",{staticStyle:{width:"350px"},attrs:{transfer:!0},model:{value:e.ParamValue,callback:function(r){t.$set(e,"ParamValue",r)},expression:"item.ParamValue"}},t._l(e.ParamChoices,function(e){return r("Option",{key:e,attrs:{value:e}},[t._v("\n              "+t._s(e)+"\n            ")])})):r("Input",{staticStyle:{width:"350px"},attrs:{size:"small",readonly:"",type:"text",placeholder:"small size"},model:{value:e.ParamValue,callback:function(r){t.$set(e,"ParamValue","string"==typeof r?r.trim():r)},expression:"item.ParamValue"}})],1),t._v(" "),r("td",[e.ParamChoices?t._e():r("Button",{attrs:{type:"success",size:"small"},on:{click:function(e){t.handleReload(a,!0)}}},[t._v("查看/编辑")])],1)]),t._v(" "),r("div",[r("span",{staticStyle:{color:"red"}},[t._v(t._s(t.getValidateErrors(e.ParamName)))])])])}),t._v(" "),r("ParamInputEditDialog",{ref:"paramInputEditDialog",attrs:{"param-input-schema-items":t.paramInputSchemaItems},on:{handleSubmit:t.refreshParamInputSchemaItems,handleReload:t.handleReload}})],2)])},staticRenderFns:[]};var S=r("VU/8")(v,g,!1,function(t){r("EJtF")},"data-v-e8cd96da",null).exports,y={name:"WorkStepPreParamOutputTree",props:{paramOutputSchemaTreeNode:{type:Object,default:function(){}}},computed:{data1:function(){var t={title:this.paramOutputSchemaTreeNode.NodeName,expand:!1};return function t(e,r){if(null!=e.NodeChildrens&&e.NodeChildrens.length>0){for(var a=[],n=0;n<e.NodeChildrens.length;n++){var o=e.NodeChildrens[n],s={title:o.NodeName,expand:!1};t(o,s),a.push(s)}r.children=a}}(this.paramOutputSchemaTreeNode,t),[t]}}},x={render:function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("Tree",{attrs:{data:this.data1,"show-checkbox":""}})],1)},staticRenderFns:[]};var b=r("VU/8")(y,x,!1,function(t){r("MQaT")},"data-v-52a00530",null).exports,I=r("pwhd"),M={name:"ParamMappingAdd",components:{ISimpleBtnTriggerModal:d.a},data:function(){return{paramMappingName:"",recommend_fields:["status","result","errorMsg","current_page","offset","paginator"],choosed_recommend_fields:[]}},methods:{handleSubmit:function(){var t=this;this.choosed_recommend_fields.forEach(function(e){t.$emit("handleSubmit",e)}),this.paramMappingName.split(",").forEach(function(e){""!=e.trim()&&t.$emit("handleSubmit",e.trim())}),this.$refs.triggerModal.hideModal()}}},C={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ISimpleBtnTriggerModal",{ref:"triggerModal",attrs:{"btn-text":"新增","btn-size":"small","modal-title":"新增","modal-width":600}},[r("Input",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"textarea",rows:5,placeholder:"请输入新增的字段名称"},model:{value:t.paramMappingName,callback:function(e){t.paramMappingName="string"==typeof e?e.trim():e},expression:"paramMappingName"}}),t._v(" "),r("div",[r("div",{staticStyle:{"margin-top":"20px","margin-bottom":"10px"}},[t._v("推荐字段：")]),t._v(" "),r("CheckboxGroup",{model:{value:t.choosed_recommend_fields,callback:function(e){t.choosed_recommend_fields=e},expression:"choosed_recommend_fields"}},t._l(t.recommend_fields,function(e){return r("Checkbox",{attrs:{label:e}},[r("span",[t._v(t._s(e))])])}))],1),t._v(" "),r("Row",{staticStyle:{"text-align":"right"}},[r("Button",{staticStyle:{"margin-top":"6px"},attrs:{type:"success"},on:{click:function(e){t.handleSubmit()}}},[t._v("提交")])],1)],1)},staticRenderFns:[]};var P={name:"ParamMapping",components:{ParamMappingAdd:r("VU/8")(M,C,!1,function(t){r("Pu5m")},"data-v-4eae442c",null).exports},props:{workStepType:{type:String,default:""},paramMappings:{type:Array,default:[]}},data:function(){return{showMoreInfoIndex:-1}},methods:{toggleShowMoreInfo:function(t){this.showMoreInfoIndex=this.showMoreInfoIndex==t?-1:t},toggleLocation:function(t,e){var r=t,a=t+e;if(!(r<0||a<0||r>=this.paramMappings.length||a>=this.paramMappings.length)){var n=this.paramMappings[r],o=this.paramMappings[a];this.paramMappings.splice(r,1,o),this.paramMappings.splice(a,1,n)}},paramMappingAdd:function(t){for(var e=!1,r=0;r<this.paramMappings.length;r++){var a=this.paramMappings[r];a.paramMappingName==t&&(e=!0,this.paramMappings[r]=a)}e||this.paramMappings.push({paramMappingName:t})},handleDelete:function(t){for(var e=0;e<this.paramMappings.length;e++){this.paramMappings[e].paramMappingName==t&&this.paramMappings.splice(e,1)}}}},D={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",[r("Row",[r("ParamMappingAdd",{directives:[{name:"show",rawName:"v-show",value:0==t.paramMappings.length,expression:"paramMappings.length == 0"}],on:{handleSubmit:t.paramMappingAdd}}),t._v(" "),t._l(t.paramMappings,function(e,a){return r("div",[r("table",[r("tr",[r("td",[t._v("\n            变量名："),r("Input",{staticStyle:{width:"150px"},attrs:{size:"small",type:"text"},model:{value:e.paramMappingName,callback:function(r){t.$set(e,"paramMappingName",r)},expression:"paramMapping.paramMappingName"}})],1),t._v(" "),"work_start"==t.workStepType?r("td",[t._v("\n            默认值："),r("Input",{staticStyle:{width:"150px"},attrs:{size:"small",type:"text"},model:{value:e.paramMappingDefault,callback:function(r){t.$set(e,"paramMappingDefault",r)},expression:"paramMapping.paramMappingDefault"}})],1):t._e(),t._v(" "),r("td",[r("Icon",{attrs:{size:15,type:"md-arrow-round-up"},on:{click:function(e){t.toggleLocation(a,-1)}}}),t._v(" "),r("Icon",{attrs:{size:15,type:"md-arrow-round-down"},on:{click:function(e){t.toggleLocation(a,1)}}}),t._v(" "),r("Icon",{attrs:{size:15,type:"ios-settings-outline"},on:{click:function(e){t.toggleShowMoreInfo(a)}}}),t._v(" "),r("Button",{staticStyle:{"margin-left":"6px"},attrs:{type:"error",size:"small"},on:{click:function(r){t.handleDelete(e.paramMappingName)}}},[t._v("删除")]),t._v(" "),r("ParamMappingAdd",{on:{handleSubmit:t.paramMappingAdd}})],1)]),t._v(" "),r("tr",["work_start"==t.workStepType&&t.showMoreInfoIndex==a?r("td",{staticStyle:{padding:"2px 0 8px 0"},attrs:{colspan:"3"}},[r("Checkbox",{model:{value:e.paramMappingCleanXss,callback:function(r){t.$set(e,"paramMappingCleanXss",r)},expression:"paramMapping.paramMappingCleanXss"}},[t._v("CleanXss")]),t._v(" "),r("Checkbox",{model:{value:e.paramMappingSafePageNo,callback:function(r){t.$set(e,"paramMappingSafePageNo",r)},expression:"paramMapping.paramMappingSafePageNo"}},[t._v("SafePageNo")]),t._v(" "),r("Checkbox",{model:{value:e.paramMappingSafePageSize,callback:function(r){t.$set(e,"paramMappingSafePageSize",r)},expression:"paramMapping.paramMappingSafePageSize"}},[t._v("SafePageSize")])],1):t._e()])])])})],2)],1)},staticRenderFns:[]};var $={name:"ParamInfo",components:{ParamInputEdit:S,PreParamOutputTree:b,ParamMapping:r("VU/8")(P,D,!1,function(t){r("aXwl")},"data-v-3dffd0de",null).exports,ISimpleConfirmModal:I.default},props:{workId:{type:Number,default:-1},worksteps:{type:Array,default:function(){return[]}}},data:function(){return{spinShow:!1,showFormModal:!1,paramInputSchema:"",paramOutputSchema:"",paramOutputSchemaTreeNode:null,showParamMapping:!1,showEdit:!1,paramMappings:[],workStepParamInfo:{work_id:this.workId,work_step_id:0,work_step_name:"",work_step_type:""}}},methods:{reloadWorkStepParamInfo:function(t,e){this.$emit("reloadWorkStepParamInfo",t)},handleSubmit:function(){var t=u()(l.a.mark(function t(){var e,r,a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=s()(this.paramInputSchema),r=s()(this.paramMappings),t.next=4,Object(c.C)(this.workStepParamInfo.work_id,this.workStepParamInfo.work_step_id,e,r);case 4:"SUCCESS"==(a=t.sent).status?(this.$Message.success("提交成功!"),this.$emit("handleSuccess"),this.showFormModal&&this.showWorkStepParamInfo(this.workStepParamInfo.work_id,this.workStepParamInfo.work_step_id)):this.$Message.error("提交失败!"+a.errorMsg);case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),loadWorkStepInfo:function(){var t=u()(l.a.mark(function t(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.spinShow=!0,t.next=3,Object(c._1)(this.workStepParamInfo.work_id,this.workStepParamInfo.work_step_id);case 3:e=t.sent,this.spinShow=!1,"SUCCESS"==e.status?(this.workStepParamInfo.work_id=e.step.work_id,this.workStepParamInfo.work_step_id=e.step.work_step_id,this.workStepParamInfo.work_step_name=e.step.work_step_name,this.workStepParamInfo.work_step_type=e.step.work_step_type,Object(h.g)(e.step.work_step_type,["work_start","work_end","mapper","entity_parser","goto_condition"])?this.showParamMapping=!0:this.showParamMapping=!1,this.showEdit=!0,this.paramInputSchema=e.paramInputSchema,this.paramOutputSchema=e.paramOutputSchema,this.paramOutputSchemaTreeNode=e.paramOutputSchemaTreeNode,this.paramMappings=null!=e.paramMappings?e.paramMappings:[],this.$store.dispatch("commitSetCurrent",{current_work_id:e.step.work_id,current_work_step_id:e.step.work_step_id}),this.showFormModal=!0,this.$refs.paramInputEdit&&this.$refs.paramInputEdit.refreshWorkValidateDetail()):this.$Message.error("加载失败!");case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),closeModal:function(){this.showFormModal=!1},showWorkStepParamInfo:function(t,e){this.workStepParamInfo.work_id=t,this.workStepParamInfo.work_step_id=e,this.loadWorkStepInfo()}}},T={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Modal",{attrs:{width:"1200",title:"查看/编辑 workstep 参数","footer-hide":!0,"mask-closable":!1,styles:{top:"20px"}},model:{value:t.showFormModal,callback:function(e){t.showFormModal=e},expression:"showFormModal"}},[r("Row",[r("Col",{attrs:{span:"6"}},[r("Scroll",{attrs:{height:"450"}},t._l(t.worksteps,function(e){return r("p",[r("Tag",[r("span",{on:{click:function(r){t.reloadWorkStepParamInfo(e.work_step_id,e.work_step_name)}}},[t._v(t._s(e.work_step_name))])])],1)}))],1),t._v(" "),r("Col",{attrs:{span:"18"}},[t.spinShow?r("Spin",{attrs:{size:"large",fix:""}}):t._e(),t._v(" "),r("Scroll",{staticStyle:{position:"relative"},attrs:{height:"450"}},[r("Row",{staticStyle:{"margin-bottom":"20px","text-align":"center",color:"green"}},[r("Col",{attrs:{span:"18"}},[r("h2",[t._v("步骤名称:"+t._s(t.workStepParamInfo.work_step_name)+",步骤类型:"+t._s(t.workStepParamInfo.work_step_type))])])],1),t._v(" "),r("Row",{staticStyle:{"margin-right":"5px","margin-left":"20px"},attrs:{gutter:16}},[r("Col",{attrs:{span:"18"}},[r("Tabs",{attrs:{type:"card",name:"tab_paramInfo",animated:!1,value:"edit"}},[t.showParamMapping?r("TabPane",{attrs:{label:"ParamMapping",name:"ParamMapping",tab:"tab_paramInfo",index:1}},[r("ParamMapping",{attrs:{paramMappings:t.paramMappings,"work-step-type":t.workStepParamInfo.work_step_type}})],1):t._e(),t._v(" "),t.showEdit?r("TabPane",{attrs:{label:"edit",name:"edit",tab:"tab_paramInfo",index:2}},[r("ParamInputEdit",{ref:"paramInputEdit",attrs:{"work-id":t.workStepParamInfo.work_id,"work-step-id":t.workStepParamInfo.work_step_id,paramInputSchemaItems:t.paramInputSchema.ParamInputSchemaItems}})],1):t._e(),t._v(" "),r("Button",{attrs:{slot:"extra",size:"small"},slot:"extra"},[t._v("input")])],1),t._v(" "),r("Row",{staticStyle:{"padding-left":"130px","margin-top":"20px"}},[r("Button",{attrs:{type:"success",size:"small"},on:{click:t.handleSubmit}},[t._v("提交")]),t._v(" "),r("Button",{attrs:{type:"info",size:"small"},on:{click:t.closeModal}},[t._v("Close")])],1)],1),t._v(" "),r("Col",{attrs:{span:"6"}},[r("Tabs",{attrs:{type:"card",animated:!1}},[r("TabPane",{attrs:{label:"Tree"}},[t.paramOutputSchemaTreeNode?r("PreParamOutputTree",{attrs:{paramOutputSchemaTreeNode:t.paramOutputSchemaTreeNode}}):t._e()],1),t._v(" "),r("Button",{attrs:{slot:"extra",size:"small"},slot:"extra"},[t._v("output")])],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var O=r("VU/8")($,T,!1,function(t){r("UIi+")},"data-v-0cb2fd4b",null).exports,W=r("Nb9Q"),V={name:"BaseInfo",props:{worksteps:{type:Array,default:function(){return[]}}},data:function(){return{spinShow:!1,showFormModal:!1,visible:!1,nodeMetas:[],formValidate:{work_id:-1,work_step_id:-1,work_step_name:"",work_step_type:"",work_step_desc:"",is_defer:"false"},ruleValidate:{work_step_name:[{validator:function(t,e,r){""===e?r(new Error("字段值不能为空!")):Object(h.k)(e)?e.length>30?r(new Error("长度不能超过30个字符!")):r():r(new Error("存在非法字符，只能包含字母，数字，下划线!"))},trigger:"blur"}],work_step_type:[{required:!0,message:"work_step_type 不能为空!",trigger:"blur"}]}}},methods:{closePoptip:function(t){this.formValidate.work_step_type=t,this.visible=!1},loadWorkStepInfo:function(){var t=u()(l.a.mark(function t(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.spinShow=!0,t.next=3,Object(c._1)(this.formValidate.work_id,this.formValidate.work_step_id);case 3:e=t.sent,this.spinShow=!1,"SUCCESS"==e.status&&(this.formValidate.work_step_name=e.step.work_step_name,this.formValidate.work_step_type=e.step.work_step_type,this.formValidate.work_step_desc=e.step.work_step_desc,this.formValidate.is_defer=e.step.is_defer);case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),reloadWorkStepBaseInfo:function(t,e){Object(h.g)(e,["start","end"])||this.$emit("reloadWorkStepBaseInfo",t)},showWorkStepBaseInfo:function(t,e){this.$refs.formValidate.resetFields(),this.formValidate.work_id=t,this.formValidate.work_step_id=e,this.loadWorkStepInfo(),this.showFormModal=!0,this.nodeMetas=this.$store.state.nodeMetas},handleSubmit:function(t){var e,r=this;this.$refs[t].validate((e=u()(l.a.mark(function e(a){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,Object(c.B)(r.formValidate.work_id,r.formValidate.work_step_id,r.formValidate.work_step_name,r.formValidate.work_step_desc,r.formValidate.work_step_type,r.formValidate.is_defer);case 3:"SUCCESS"==e.sent.status?(r.$Message.success("提交成功!"),r.$emit("handleSuccess"),r.$refs[t].resetFields()):r.$Message.error("提交失败!参数不合法或者步骤名称已存在!");case 5:case"end":return e.stop()}},e,r)})),function(t){return e.apply(this,arguments)}))}}},E={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Modal",{attrs:{width:"850",title:"查看/编辑 workstep","footer-hide":!0,"mask-closable":!1,styles:{top:"20px"}},model:{value:t.showFormModal,callback:function(e){t.showFormModal=e},expression:"showFormModal"}},[r("div",[r("Row",[r("Col",{attrs:{span:"8"}},[r("Scroll",{attrs:{height:"450"}},t._l(t.worksteps,function(e){return r("p",[r("Tag",[r("span",{on:{click:function(r){t.reloadWorkStepBaseInfo(e.work_step_id,e.work_step_name)}}},[t._v(t._s(e.work_step_name))])])],1)}))],1),t._v(" "),r("Col",{attrs:{span:"16"}},[t.spinShow?r("Spin",{attrs:{size:"large",fix:""}}):t._e(),t._v(" "),r("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":140}},[r("FormItem",{attrs:{label:"work_id",prop:"work_id"}},[r("Input",{attrs:{readonly:"",placeholder:"请输入 work_id"},model:{value:t.formValidate.work_id,callback:function(e){t.$set(t.formValidate,"work_id","string"==typeof e?e.trim():e)},expression:"formValidate.work_id"}})],1),t._v(" "),r("FormItem",{attrs:{label:"work_step_id",prop:"work_step_id"}},[r("Input",{attrs:{readonly:"",placeholder:"请输入 work_step_id"},model:{value:t.formValidate.work_step_id,callback:function(e){t.$set(t.formValidate,"work_step_id","string"==typeof e?e.trim():e)},expression:"formValidate.work_step_id"}})],1),t._v(" "),r("FormItem",{attrs:{label:"work_step_name",prop:"work_step_name"}},[r("Input",{attrs:{placeholder:"请输入 work_step_name"},model:{value:t.formValidate.work_step_name,callback:function(e){t.$set(t.formValidate,"work_step_name","string"==typeof e?e.trim():e)},expression:"formValidate.work_step_name"}})],1),t._v(" "),r("FormItem",{attrs:{label:"work_step_type",prop:"work_step_type"}},[r("Row",[r("Col",{attrs:{span:"18"}},[r("Input",{attrs:{placeholder:"请输入 work_step_type"},model:{value:t.formValidate.work_step_type,callback:function(e){t.$set(t.formValidate,"work_step_type","string"==typeof e?e.trim():e)},expression:"formValidate.work_step_type"}})],1),t._v(" "),r("Col",{attrs:{span:"6"}},[r("Poptip",{attrs:{placement:"left",width:"420"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[r("Button",{staticStyle:{"margin-left":"5px"}},[t._v("选择步骤类型")]),t._v(" "),r("div",{attrs:{slot:"content"},slot:"content"},t._l(t.nodeMetas,function(e){return r("span",{staticStyle:{margin:"5px",float:"left"}},[r("Tag",[r("span",{on:{click:function(r){t.closePoptip(e.name)}}},[t._v(t._s(e.name))])])],1)}))],1)],1)],1)],1),t._v(" "),r("FormItem",{attrs:{label:"is_defer",prop:"is_defer"}},[r("Select",{model:{value:t.formValidate.is_defer,callback:function(e){t.$set(t.formValidate,"is_defer",e)},expression:"formValidate.is_defer"}},[r("Option",{attrs:{value:"true"}},[t._v("true")]),t._v(" "),r("Option",{attrs:{value:"false"}},[t._v("false")])],1)],1),t._v(" "),r("FormItem",{attrs:{label:"work_step_desc",prop:"work_step_desc"}},[r("Input",{attrs:{type:"textarea",rows:4,placeholder:"请输入 work_step_desc"},model:{value:t.formValidate.work_step_desc,callback:function(e){t.$set(t.formValidate,"work_step_desc","string"==typeof e?e.trim():e)},expression:"formValidate.work_step_desc"}})],1),t._v(" "),r("FormItem",[r("Button",{staticStyle:{"margin-right":"6px"},attrs:{type:"success",size:"small"},on:{click:function(e){t.handleSubmit("formValidate")}}},[t._v("提交\n            ")]),t._v(" "),r("Button",{staticStyle:{"margin-right":"6px"},attrs:{type:"warning",size:"small"},on:{click:function(e){t.showFormModal=!1}}},[t._v("Close")])],1)],1)],1)],1)],1)])},staticRenderFns:[]};var N=r("VU/8")(V,E,!1,function(t){r("K060")},"data-v-a2edb2bc",null).exports,R=r("9Bh1"),L={name:"WorkStepEditBtns",props:{showArrow:{type:Boolean,default:!0},showEdit:{type:Boolean,default:!0},showParam:{type:Boolean,default:!0},showDelete:{type:Boolean,default:!0},showCopy:{type:Boolean,default:!0},showRefer:{type:Boolean,default:!0}},methods:{handleClick:function(t){this.$emit("handleClick",t)}}},B={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",[t.showArrow?r("span",[r("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"md-arrow-round-up",size:"15"},on:{click:function(e){t.handleClick("up")}}}),t._v(" "),r("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"md-arrow-round-down",size:"15"},on:{click:function(e){t.handleClick("down")}}}),t._v(" "),r("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"md-arrow-round-back",size:"15"},on:{click:function(e){t.handleClick("back")}}}),t._v(" "),r("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"md-arrow-round-forward",size:"15"},on:{click:function(e){t.handleClick("forward")}}})],1):t._e(),t._v(" "),t.showEdit?r("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"error",size:"small"},on:{click:function(e){t.handleClick("edit")}}},[t._v("编辑")]):t._e(),t._v(" "),t.showParam?r("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"info",size:"small"},on:{click:function(e){t.handleClick("param")}}},[t._v("参数")]):t._e(),t._v(" "),t.showDelete?r("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"warning",size:"small"},on:{click:function(e){t.handleClick("delete")}}},[t._v("删除")]):t._e(),t._v(" "),t.showCopy?r("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small"},on:{click:function(e){t.handleClick("copy")}}},[t._v("复制")]):t._e(),t._v(" "),t.showRefer?r("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"warning",size:"small"},on:{click:function(e){t.handleClick("refer")}}},[t._v("父流程")]):t._e()],1)},staticRenderFns:[]};var z=r("VU/8")(L,B,!1,function(t){r("FlG4")},"data-v-5dbed331",null).exports,j=r("leY6"),A={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Modal",{attrs:{fullscreen:"",title:"运行报表"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[r("div",[t._v("AAAAAAAAAAAA")])])},staticRenderFns:[]};var F,U=r("VU/8")({name:"WorkDashboard",data:function(){return{showModal:!0}},methods:{showWorkDashboard:function(t){this.showModal=t}}},A,!1,function(t){r("pBZ3")},"data-v-5bc0452d",null).exports,q={name:"WorkStepPoptip",props:{worksteps:{type:Array,default:[]},workstep:{type:Object,default:null},usedMap:{type:Object,default:null}},methods:{gotoWorkDetail:function(){var t=u()(l.a.mark(function t(e,r){var a,n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.T)(e);case 2:a=t.sent,(n=a.subworks.filter(function(t){return t.id===r})).length>0&&this.$router.push({path:"/iwork/workstepList",query:{work_id:n[0].id,work_name:n[0].work_name,parent_href:location.href}});case 5:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),showNotice:function(t,e){this.$Notice.success({title:"参数名称："+t,desc:"参数值："+e})},showAllNoticeWithId:function(t){var e=this.worksteps.filter(function(e){return e.work_step_id==t})[0],r=Object(h.a)(e.work_step_input)?null:JSON.parse(e.work_step_input).ParamInputSchemaItems;if(null!=r){var a="";for(var n in r){var o=r[n];a+="<span style='color:green;'>"+o.ParamName+"</span>:<span style='color:blue;'>"+o.ParamValue+"</span><br/><br/>"}this.$Notice.success({title:"全部参数",duration:0,render:function(t){return t("div",{style:"word-break: break-all;",domProps:{innerHTML:a}})}})}}},computed:{ParamInputSchemaItems:function(){return Object(h.a)(this.workstep.work_step_input)?null:JSON.parse(this.workstep.work_step_input).ParamInputSchemaItems},ParamOutputSchemaItems:function(){return Object(h.a)(this.workstep.work_step_output)?null:JSON.parse(this.workstep.work_step_output).ParamOutputSchemaItems}},beforeCreate:function(){F=this},filters:{renderWorkStepName:function(t){return F.worksteps.filter(function(e){return e.work_step_id==t})[0].work_step_name}}},G={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.workstep?r("div",{staticStyle:{width:"500px",padding:"10px"}},[r("Scroll",[r("div",{staticStyle:{"text-align":"right"}},["work_sub"==t.workstep.work_step_type?r("Button",{attrs:{size:"small",type:"success"},on:{click:function(e){t.gotoWorkDetail(t.workstep.work_id,t.workstep.work_sub_id)}}},[t._v("进入")]):t._e()],1),t._v(" "),r("Row",[r("Col",{attrs:{span:"8"}},[t._v("输入参数")]),t._v(" "),r("Col",{attrs:{span:"8"}},[t._v("输出参数")]),t._v(" "),r("Col",{attrs:{span:"8"}},[t._v("引用关系")]),t._v(" "),t.ParamInputSchemaItems?r("Col",{attrs:{span:"8"}},[r("ul",[t._l(t.ParamInputSchemaItems,function(e){return r("li",[r("Tag",{nativeOn:{click:function(r){t.showNotice(e.ParamName,e.ParamValue)}}},[t._v(t._s(e.ParamName))])],1)}),t._v(" "),r("li",[r("a",{on:{click:function(e){t.showAllNoticeWithId(t.workstep.work_step_id)}}},[t._v("全部参数")])])],2)]):t._e(),t._v(" "),t.ParamInputSchemaItems?r("Col",{attrs:{span:"8"}},[r("ul",t._l(t.ParamOutputSchemaItems,function(e){return r("li",[r("Tag",[t._v(t._s(e.ParamName))])],1)}))]):t._e(),t._v(" "),t.usedMap?r("Col",{attrs:{span:"8"}},t._l(t.usedMap,function(e,a){return r("span",[a==t.workstep.work_step_id?r("span",t._l(e,function(a){return e?r("li",{staticStyle:{"list-style":"none"}},[r("Tag",{nativeOn:{click:function(e){t.showAllNoticeWithId(a)}}},[t._v(t._s(t._f("renderWorkStepName")(a)))])],1):t._e()})):t._e()])})):t._e()],1)],1)],1):t._e()},staticRenderFns:[]};var J=r("VU/8")(q,G,!1,function(t){r("MrAK")},"data-v-2e6a785a",null).exports,X=r("bhVh"),H={name:"WorkStepList",components:{ParamInfo:O,ISimpleLeftRightRow:W.default,BaseInfo:N,WorkValidate:R.default,ISimpleConfirmModal:I.default,WorkStepEditBtns:z,WorkStepComponent:j.a,WorkDashboard:U,WorkStepPoptip:J,RunLogList:X.default},data:function(){return{validateDetails:[],refactor_worksub_name:"",nodeMetas:[],worksteps:[],loading:!1,showWorkDashboard:!1,usedMap:null,runLogRecordCount:{},showRunLogDrawer:!1,work:null}},computed:{errorCount:function(){return this.getErrorOrTotalCount(this.$route.query.work_id,"error")},allCount:function(){return this.getErrorOrTotalCount(this.$route.query.work_id,"total")},_work_id:function(){return parseInt(this.$route.query.work_id)},columns1:function(){var t=this,e=arguments,r=this,a=[{type:"selection",width:60,align:"center"},{title:"步骤编号",key:"work_step_id",width:100,render:function(e,a){var n=r.validateDetails.filter(function(t){return r.$route.query.work_id==t.work_id&&r.worksteps[a.index].work_step_id==t.work_step_id});return e("div",{},[e("span",{},t.worksteps[a.index].work_step_id),e("a",{style:{marginLeft:"10px",color:"blue",fontStyle:"italic",display:Object(h.g)(t.worksteps[a.index].is_defer,["true"])?void 0:"none"},on:{click:function(){r.$Modal.confirm({title:"确认",width:400,content:"defer 延迟执行"})}}},"D"),e("a",{style:{marginLeft:"10px",color:"red",fontStyle:"italic",display:n.length>0?void 0:"none"},on:{click:function(){for(var t="",e=0;e<n.length;e++)t+=n[e].detail+"<br/>";r.$Modal.confirm({title:"校验错误",width:600,render:function(e){return e("div",{style:"word-break: break-all;",domProps:{innerHTML:t}})}})}}},"E")])}},{title:"操作",key:"work_step_operate",width:380,render:function(a,n){return a("div",{on:{drop:function(){var r=window.event||e[0];r.stopPropagation(),r.preventDefault();var a=r.dataTransfer.getData("Text");t.addWorkStep(n.row.work_step_id,a)},dragover:function(){return t.allowDrop()}}},[a(z,{props:{showArrow:!Object(h.g)(t.worksteps[n.index].work_step_type,["work_start","work_end"]),showEdit:!Object(h.g)(t.worksteps[n.index].work_step_type,["work_start","work_end"]),showParam:!0,showDelete:!Object(h.g)(t.worksteps[n.index].work_step_type,["work_start","work_end"]),showCopy:!Object(h.g)(t.worksteps[n.index].work_step_type,["work_start","work_end"]),showRefer:Object(h.g)(t.worksteps[n.index].work_step_type,["work_start"])},on:{handleClick:function(t){if(Object(h.b)())r.$Message.error("点击过快,请稍后重试!");else switch(t){case"up":r.changeWorkStepOrder(n.row.work_step_id,"up");break;case"down":r.changeWorkStepOrder(n.row.work_step_id,"down");break;case"back":r.batchChangeIndent("left",[n.row.work_step_id]);break;case"forward":r.batchChangeIndent("right",[n.row.work_step_id]);break;case"edit":r.showWorkStepBaseInfo(n.row.work_step_id);break;case"param":n.row.work_step_type&&r.$refs.workStepParamInfo.showWorkStepParamInfo(r.$route.query.work_id,n.row.work_step_id);break;case"delete":r.$Modal.confirm({title:"删除",content:"确认删除该条数据吗？请谨慎操作！",onOk:function(){r.deleteWorkStepByWorkStepId(r.$route.query.work_id,n.row.work_step_id)},onCancel:function(){r.$Message.info("取消操作")}});break;case"copy":r.copyWorkStepByWorkStepId(r.$route.query.work_id,n.row.work_step_id);break;case"refer":Object(h.a)(r.$route.query.parent_href)||(window.location.href=r.$route.query.parent_href)}}}})])}}];return[].push.apply(a,[{title:"步骤名称",key:"work_step_name",width:600,render:function(e,r){var a=t;if(r.row.$isEdit&&!Object(h.g)(r.row.work_step_name,["start","end"]))return e("input",{style:{width:"300px"},domProps:{value:r.row.work_step_name},on:{input:function(t){r.row.work_step_name=t.target.value},blur:function(){var t=u()(l.a.mark(function t(e){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(h.h)(r.row.work_step_name,r.row.work_step_type+"_")){t.next=7;break}return t.next=3,Object(c.B)(r.row.work_id,r.row.work_step_id,r.row.work_step_name,r.row.work_step_desc,r.row.work_step_type,r.row.is_defer);case 3:"SUCCESS"==t.sent.status?a.$Message.success("修改成功!"):a.$Message.error("修改失败！"),t.next=8;break;case 7:a.$Message.error("名称不合法！必须以 "+r.row.work_step_type+"_ 开头");case 8:a.refreshWorkStepList();case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}});var n=Object(h.e)("          ",r.row.work_step_indent)+t.worksteps[r.index].work_step_name,o=Object(h.e)("          ",1)+a.getExtraStr(t.worksteps[r.index]);return e("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},[e("Poptip",{props:{trigger:"hover",title:"步骤名称:"+t.worksteps[r.index].work_step_name+" --- 步骤类型:"+t.worksteps[r.index].work_step_type,placement:r.index<=6?"left-start":"left-end"},style:{marginRight:"10px"}},[e(J,{slot:"content",props:{worksteps:t.worksteps,workstep:t.worksteps[r.index],usedMap:t.usedMap}}),e("Icon",{props:{type:t.renderWorkStepTypeIcon(t.worksteps[r.index].work_step_type),size:25},style:{marginRight:"10px"}})]),e("span",{style:{color:["green","blue","grey","red"][r.row.work_step_indent]},on:{click:function(t){var e=a.worksteps[r.index];e.$isEdit=!0,a.$set(a.worksteps[r.index],e)}}},n),e("span",{style:{color:"red"},attrs:{title:o}},o)])}},{title:"步骤描述",key:"work_step_desc",width:400}]),a}},methods:{showWorkDashboardFunc:function(){this.showWorkDashboard=!0,this.$refs.workDashboard.showWorkDashboard(!0)},refreshWorkValidateDetail:function(){var t=u()(l.a.mark(function t(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c._0)(this.$route.query.work_id);case 2:"SUCCESS"==(e=t.sent).status?this.validateDetails=e.details:this.$Message.error(e.errorMsg);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),refreshWorkStepList:function(){var t=u()(l.a.mark(function t(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,Object(c._21)(this.$route.query.work_id);case 3:"SUCCESS"==(e=t.sent).status&&(this.usedMap=e.usedMap,this.worksteps=e.worksteps,this.runLogRecordCount=e.runLogRecordCount,this.refreshWorkValidateDetail()),this.loading=!1;case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),copyWorkStepByWorkStepId:function(){var t=u()(l.a.mark(function t(e,r){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.g)(e,r);case 2:"SUCCESS"==t.sent.status&&this.refreshWorkStepList();case 4:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),deleteWorkStepByWorkStepId:function(){var t=u()(l.a.mark(function t(e,r){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.o)(e,r);case 2:"SUCCESS"==t.sent.status&&this.refreshWorkStepList();case 4:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),changeWorkStepOrder:function(){var t=u()(l.a.mark(function t(e,r){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.d)(this.$route.query.work_id,e,r);case 2:"SUCCESS"==(a=t.sent).status?(this.refreshWorkStepList(),this.$Message.success("换位成功!")):this.$Message.error(a.errorMsg);case 4:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),addWorkStep:function(){var t=u()(l.a.mark(function t(e,r){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.b)(this.$route.query.work_id,e,r);case 2:"SUCCESS"==(a=t.sent).status?(this.refreshWorkStepList(),this.$Message.success("添加成功!")):this.$Message.error(a.errorMsg);case 4:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),renderWorkStepTypeIcon:function(t){for(var e=0;e<this.nodeMetas.length;e++){var r=this.nodeMetas[e];if(r.name==t)return r.icon}},showRefactorModal:function(){this.$refs.refactor_modal.showModal()},getSelectionArr:function(){for(var t=[],e=this.$refs.selection.getSelection(),r=0;r<e.length;r++)t.push(e[r].work_step_id);return t},refactor:function(){var t=u()(l.a.mark(function t(){var e,r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.getSelectionArr(),t.next=3,Object(c._12)(this.$route.query.work_id,this.refactor_worksub_name,s()(e));case 3:"SUCCESS"==(r=t.sent).status?this.refreshWorkStepList():this.$Message.error(r.errorMsg);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),batchChangeIndent:function(){var t=u()(l.a.mark(function t(e,r){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return null==r&&(r=this.getSelectionArr()),t.next=3,Object(c.c)(this.$route.query.work_id,e,s()(r));case 3:"SUCCESS"==(a=t.sent).status?this.refreshWorkStepList():this.$Message.error(a.errorMsg);case 5:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),showRunLogList:function(){this.$router.push({path:"/iwork/runLogList",query:{work_id:this.$route.query.work_id}})},runWork:function(){var t=u()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c._14)(this.$route.query.work_id);case 2:"SUCCESS"==t.sent.status&&this.$Message.success("运行任务已触发!");case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),allowDrop:function(){(window.event||arguments[0]).preventDefault()},showWorkStepParamInfo:function(t){this.$refs.workStepParamInfo.showWorkStepParamInfo(this.$route.query.work_id,t)},showWorkStepBaseInfo:function(t){this.$refs.workStepBaseInfo.showWorkStepBaseInfo(this.$route.query.work_id,t)},getExtraStr:function(t){if(""!=t.work_step_input)for(var e=JSON.parse(t.work_step_input),r=0;r<e.ParamInputSchemaItems.length;r++){var a=e.ParamInputSchemaItems[r];if("bool_expression"==a.ParamName)return a.ParamValue}return""},refreshWorkDetail:function(){var t=u()(l.a.mark(function t(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c._11)(this.$route.query.work_id);case 2:"SUCCESS"==(e=t.sent).status&&(this.work=e.work);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),refreshNodeMetas:function(){var t=u()(l.a.mark(function t(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.S)("nodeMetas");case 2:"SUCCESS"==(e=t.sent).status&&(this.nodeMetas=e.nodeMetas,this.$store.dispatch("commitSetNodeMetas",{nodeMetas:e.nodeMetas}));case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getErrorOrTotalCount:function(t,e){var r=n()(this.runLogRecordCount).filter(function(e){return e==t})[0];if(r)return"error"==e?this.runLogRecordCount[r].errorCount:"/"+this.runLogRecordCount[r].allCount}},mounted:function(){this.refreshWorkDetail(),this.refreshWorkStepList(),this.refreshNodeMetas()},watch:{$route:function(t,e){this.refreshWorkStepList()}}},Z={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{margin:"10px"}},[r("WorkStepComponent",{ref:"workStepComponent"}),t._v(" "),r("WorkDashboard",{directives:[{name:"show",rawName:"v-show",value:t.showWorkDashboard,expression:"showWorkDashboard"}],ref:"workDashboard"}),t._v(" "),t.$route.query.work_name?r("h3",{staticStyle:{"text-align":"center"}},[t._v("\n    流程名称："+t._s(t.$route.query.work_name)+"\n  ")]):t._e(),t._v(" "),t.work?r("p",{staticStyle:{"text-align":"center",background:"#fff5dd",padding:"10px",margin:"10px"}},[t._v("\n    所属模块："+t._s(t.work.module_name)+"      流程描述："+t._s(t.work.work_desc))]):t._e(),t._v(" "),r("Button",{attrs:{type:"success",size:"small"},on:{click:function(e){t.$router.push({path:"/iwork/workList"})}}},[t._v("返回列表")]),t._v(" "),r("Button",{attrs:{type:"warning",size:"small"},on:{click:function(e){t.$router.push({path:"/iwork/filterList"})}}},[t._v("过滤器配置")]),t._v(" "),r("Row",{staticClass:"code-row-bg",staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{type:"flex",justify:"start"}},[r("Col",{attrs:{span:"2"}},[r("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"error",size:"small"},on:{click:function(e){t.$refs.workStepComponent.toggleShow()}}},[t._v("显示组件")])],1),t._v(" "),r("Col",{attrs:{span:"2"}},[r("Button",{attrs:{type:"warning",size:"small"},on:{click:t.showRefactorModal}},[t._v("重构流程")])],1),t._v(" "),r("Col",{attrs:{span:"2"}},[r("Button",{attrs:{type:"info",size:"small"},on:{click:function(e){t.batchChangeIndent("left",null)}}},[t._v("向左缩进")])],1),t._v(" "),r("Col",{attrs:{span:"2"}},[r("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){t.batchChangeIndent("right",null)}}},[t._v("向右缩进")])],1),t._v(" "),r("Col",{attrs:{span:"2"}},[r("Button",{attrs:{type:"warning",size:"small"},on:{click:t.runWork}},[t._v("运行流程")])],1),t._v(" "),r("Col",{attrs:{span:"2"}},[r("Button",{attrs:{type:"info",size:"small"},on:{click:t.showRunLogList}},[t._v("运行日志")])],1),t._v(" "),r("Col",{attrs:{span:"2"}},[r("Button",{attrs:{type:"error",size:"small"},on:{click:t.showWorkDashboardFunc}},[t._v("运行报表")])],1),t._v(" "),r("Col",{attrs:{span:"2"}},[r("WorkValidate",{attrs:{work_id:t._work_id}})],1),t._v(" "),r("ISimpleConfirmModal",{ref:"refactor_modal",attrs:{"modal-title":"重构为子流程","modal-width":500},on:{handleSubmit:t.refactor}},[r("Input",{attrs:{placeholder:"请输入重构的子流程名称"},model:{value:t.refactor_worksub_name,callback:function(e){t.refactor_worksub_name="string"==typeof e?e.trim():e},expression:"refactor_worksub_name"}})],1)],1),t._v(" "),r("BaseInfo",{ref:"workStepBaseInfo",attrs:{worksteps:t.worksteps},on:{reloadWorkStepBaseInfo:t.showWorkStepBaseInfo,handleSuccess:t.refreshWorkStepList}}),t._v(" "),r("ParamInfo",{ref:"workStepParamInfo",attrs:{worksteps:t.worksteps},on:{reloadWorkStepParamInfo:t.showWorkStepParamInfo,handleSuccess:t.refreshWorkStepList}}),t._v(" "),r("Row",{staticStyle:{"margin-bottom":"5px"}},[r("Col",{attrs:{span:"24"}},[r("span",{on:{click:function(e){t.showRunLogDrawer=!0}}},[r("Button",{attrs:{type:"default",size:"small"}},[t._v("失败次数/总次数   "),r("span",{staticStyle:{color:"red"}},[t._v(t._s(t.errorCount))]),t._v(" "+t._s(t.allCount))])],1),t._v(" "),r("Drawer",{attrs:{title:"运行日志",width:"900",closable:!1},model:{value:t.showRunLogDrawer,callback:function(e){t.showRunLogDrawer=e},expression:"showRunLogDrawer"}},[r("RunLogList",{attrs:{"work-id":t._work_id}})],1)],1)],1),t._v(" "),r("Table",{ref:"selection",attrs:{loading:t.loading,height:500,border:"",columns:t.columns1,data:t.worksteps,size:"small"}})],1)},staticRenderFns:[]};var K=r("VU/8")(H,Z,!1,function(t){r("Tx0V")},"data-v-6880fdcf",null);e.default=K.exports},ZyFn:function(t,e){},aXwl:function(t,e){},bhVh:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r("Xxa5"),n=r.n(a),o=r("exGp"),s=r.n(o),i=r("gyMJ"),l=r("GCuT"),p={name:"RunLogList",props:{workId:{type:Number,default:-1}},data:function(){var t=this;return{current_page:1,total:0,offset:10,runLogRecords:[],logLevel:"",columns1:[{title:"tracking_id",key:"tracking_id",width:300},{title:"work_name",key:"work_name"},{title:"log_level",key:"log_level",width:100},{title:"last_updated_time",key:"last_updated_time",render:function(t,e){return t("div",Object(l.c)(new Date(e.row.last_updated_time),"yyyy-MM-dd hh:mm"))}},{title:"操作",key:"operate",render:function(e,r){return e("div",[e("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.$router.push({path:"/iwork/runLogDetail",query:{tracking_id:t.runLogRecords[r.index].tracking_id}})}}},"查看")])}}]}},methods:{loadLevel:function(t){this.logLevel=t,this.refreshRunlogRecordList()},refreshRunlogRecordList:function(){var t=s()(n.a.mark(function t(){var e;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(i.H)(this.getWorkId(),this.logLevel,this.offset,this.current_page);case 2:"SUCCESS"==(e=t.sent).status&&(this.runLogRecords=e.runLogRecords,this.total=e.paginator.totalcount);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),handleChange:function(t){this.current_page=t,this.refreshRunlogRecordList()},handlePageSizeChange:function(t){this.offset=t,this.refreshRunlogRecordList()},getWorkId:function(){return this.workId>0?this.workId:this.$route.query.work_id}},mounted:function(){this.refreshRunlogRecordList()},watch:{$route:function(t,e){this.refreshRunlogRecordList()}}},u={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",[r("div",{staticStyle:{"margin-bottom":"10px"}},[r("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.loadLevel("ERROR")}}},[t._v("Error")]),t._v(" "),r("Button",{attrs:{type:"success",size:"small"},on:{click:function(e){t.loadLevel("")}}},[t._v("All")])],1),t._v(" "),r("Table",{attrs:{columns:t.columns1,data:t.runLogRecords,size:"small"}}),t._v(" "),r("Page",{attrs:{total:t.total,"page-size":t.offset,"show-total":"","show-sizer":"",styles:{"text-align":"center","margin-top":"10px"}},on:{"on-change":t.handleChange,"on-page-size-change":t.handlePageSizeChange}})],1)},staticRenderFns:[]};var c=r("VU/8")(p,u,!1,function(t){r("7tHR")},"data-v-0a4d8d73",null);e.default=c.exports},e7nt:function(t,e){},lSkx:function(t,e){},leY6:function(t,e,r){"use strict";var a=r("Gu7T"),n=r.n(a),o=r("lHA8"),s=r.n(o),i=r("Xxa5"),l=r.n(i),p=r("exGp"),u=r.n(p),c=r("gyMJ"),d=r("GCuT"),h={name:"WorkStepComponent",data:function(){return{showComponentDrawer:!1,nodeMetas:[],works:[],module_names:[]}},methods:{showComponent:function(t){return!Object(d.g)(t,["work_start","work_end"])},dragstart:function(t,e){t.dataTransfer.setData("Text",e)},toggleShow:function(){this.showComponentDrawer=!this.showComponentDrawer},refreshAllWorks:function(){var t=u()(l.a.mark(function t(){var e,r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.L)();case 2:"SUCCESS"==(e=t.sent).status&&(this.works=e.works,r=this.works.map(function(t){return t.module_name}),this.module_names=this.getUniqueArr(r));case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getUniqueArr:function(t){var e=new s.a(t);return[].concat(n()(e))},refreshNodeMetas:function(){var t=u()(l.a.mark(function t(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.S)("nodeMetas");case 2:"SUCCESS"==(e=t.sent).status&&(this.nodeMetas=e.nodeMetas);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},mounted:function(){this.refreshAllWorks(),this.refreshNodeMetas()}},f={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Drawer",{attrs:{title:"全部组件",placement:"left",closable:!0,mask:!1,scrollable:""},model:{value:t.showComponentDrawer,callback:function(e){t.showComponentDrawer=e},expression:"showComponentDrawer"}},[r("Tabs",{attrs:{value:"name1"}},[r("TabPane",{attrs:{label:"组件",name:"name1"}},t._l(t.nodeMetas,function(e){return r("span",{attrs:{draggable:"true"},on:{dragstart:function(r){t.dragstart(r,"work_type__"+e.name)}}},[t.showComponent(e.name)?r("Tag",[t._v(t._s(e.name))]):t._e()],1)})),t._v(" "),r("TabPane",{attrs:{label:"流程",name:"name2"}},[r("Collapse",[t._l(t.module_names,function(e){return r("Panel",{attrs:{name:e}},[t._v("\n          "+t._s(e)+"\n          "),r("div",{attrs:{slot:"content"},slot:"content"},t._l(t.works,function(a){return a.module_name==e?r("div",{attrs:{draggable:"true"},on:{dragstart:function(e){t.dragstart(e,"work_name__"+a.work_name)}}},[r("Tag",[r("span",{on:{click:function(e){t.$router.push({path:"/iwork/workList",query:{work_name:a.work_name}})}}},[t._v(t._s(a.work_name))])])],1):t._e()}))])}),t._v(" "),r("Panel",{attrs:{name:"all"}},[t._v("\n          全部\n          "),r("div",{attrs:{slot:"content"},slot:"content"},t._l(t.works,function(e){return r("div",{attrs:{draggable:"true"},on:{dragstart:function(r){t.dragstart(r,"work_name__"+e.work_name)}}},[r("Tag",[r("span",{on:{click:function(r){t.$router.push({path:"/iwork/workList",query:{work_name:e.work_name}})}}},[t._v(t._s(e.work_name))])])],1)}))])],2)],1)],1)],1)},staticRenderFns:[]};var m=r("VU/8")(h,f,!1,function(t){r("e7nt")},"data-v-04fa9318",null);e.a=m.exports},pBZ3:function(t,e){}});
//# sourceMappingURL=1.e386b0a5fd97d396fb96.js.map