webpackJsonp([11],{"5sbP":function(e,t){},Bnus:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("Xxa5"),n=r.n(s),o=r("exGp"),i=r.n(o),a=r("gyMJ"),l=r("GCuT"),c={name:"IFilterList",data:function(){return{filterWorks:[],filters:[],modules:[],works:[],moduleWorks:[],current_filter_id:-1,choosedWorkNames:[],complexWorkName:""}},methods:{filterWorksWithModule:function(e){return this.works.filter(function(t){return t.module_name==e})},refreshFilterList:function(){var e=i()(n.a.mark(function e(){var t;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.C)();case 2:"SUCCESS"==(t=e.sent).status&&(this.filterWorks=t.filterWorks,this.modules=t.modules,this.works=t.works,this.filters=t.filters);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleCheckAll:function(e){for(var t=this,r=this.filterWorksWithModule(e).map(function(e){return e.work_name}),s=!0,n=0;n<r.length;n++){var o=r[n];if(!Object(l.j)(o,this.choosedWorkNames)){s=!1;break}}if(s)this.choosedWorkNames=this.choosedWorkNames.filter(function(e){return!Object(l.j)(e,r)});else{var i=r.filter(function(e){return!Object(l.j)(e,t.choosedWorkNames)});for(n=0;n<i.length;n++){var a=i[n];this.choosedWorkNames.push(a)}}},saveFilters:function(){var e=i()(n.a.mark(function e(){var t;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.current_filter_id<0)){e.next=4;break}this.$Message.error("请选择 filter!"),e.next=8;break;case 4:return e.next=6,Object(a._7)(this.current_filter_id,this.choosedWorkNames.join(","),this.complexWorkName);case 6:"SUCCESS"==(t=e.sent).status?(this.$Message.success("保存成功！"),this.refreshFilterList()):this.$Message.error(t.errorMsg);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),chooseFilter:function(){var e=this;if(this.current_filter_id>0){var t=this.filters.filter(function(t){return t.filter_work_id==e.current_filter_id}),r=t.filter(function(e){return!Object(l.a)(e.work_name)}).map(function(e){return e.work_name});this.choosedWorkNames=null!=r&&r.length>0?r[0].split(","):[];var s=t.filter(function(e){return!Object(l.a)(e.complex_work_name)}).map(function(e){return e.complex_work_name});this.complexWorkName=null!=s&&s.length>0?s[0]:""}}},mounted:function(){this.refreshFilterList()}},u={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Select",{staticStyle:{width:"400px"},on:{"on-change":e.chooseFilter},model:{value:e.current_filter_id,callback:function(t){e.current_filter_id=t},expression:"current_filter_id"}},e._l(e.filterWorks,function(t){return r("Option",{key:t.work_name,attrs:{value:t.id}},[e._v("\n      "+e._s(t.work_name)+"\n    ")])})),e._v(" "),e._l(e.modules,function(t){return r("div",{staticStyle:{"list-style":"none","margin-top":"20px"}},[r("Row",{staticStyle:{"border-bottom":"1px solid rgba(0,34,232,0.16)"}},[r("Col",{attrs:{span:"4"}},[r("Button",{attrs:{type:"success",size:"small"},on:{click:function(r){e.handleCheckAll(t.module_name)}}},[e._v("全选")]),e._v(" "),r("Tag",[r("span",[e._v(e._s(t.module_name))])])],1),e._v(" "),r("Col",{attrs:{span:"20"}},[r("CheckboxGroup",{model:{value:e.choosedWorkNames,callback:function(t){e.choosedWorkNames=t},expression:"choosedWorkNames"}},e._l(e.filterWorksWithModule(t.module_name),function(e){return r("Checkbox",{attrs:{label:e.work_name}})}))],1)],1)],1)}),e._v(" "),r("Input",{attrs:{type:"textarea",rows:4,placeholder:"复杂过滤器配置"},model:{value:e.complexWorkName,callback:function(t){e.complexWorkName="string"==typeof t?t.trim():t},expression:"complexWorkName"}}),e._v(" "),r("Button",{staticStyle:{"margin-top":"20px"},attrs:{type:"success",size:"small"},on:{click:e.saveFilters}},[e._v("保存")])],2)},staticRenderFns:[]};var f=r("VU/8")(c,u,!1,function(e){r("5sbP")},"data-v-e21f86f8",null);t.default=f.exports}});
//# sourceMappingURL=11.44fe5d222ad7dae8429c.js.map