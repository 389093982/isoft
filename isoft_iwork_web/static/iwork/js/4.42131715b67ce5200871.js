webpackJsonp([4,22],{"8pn2":function(e,t){},KbTn:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Xxa5"),o=r.n(a),l=r("exGp"),i=r.n(l),n=r("Nb9Q"),s=r("pwhd"),u=r("gPTX"),d=r("XZCL"),m=r("gyMJ"),f=r("GCuT"),c={name:"IModuleList",components:{ISimpleLeftRightRow:n.default,ISimpleConfirmModal:s.default,IKeyValueForm:u.default,ISimpleSearch:d.default},data:function(){var e=this;return{current_page:1,total:0,offset:10,search:"",modules:[],columns1:[{title:"module_name",key:"module_name"},{title:"module_desc",key:"module_desc"},{title:"操作",key:"operate",render:function(t,r){return t("div",[t("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.$refs.moduleEditModal.showModal(),e.$refs.moduleEditForm.initFormData(e.modules[r.index].id,e.modules[r.index].module_name,e.modules[r.index].module_desc)}}},"编辑"),t("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.deleteModuleById(e.modules[r.index].id)}}},"删除")])}}]}},methods:{deleteModuleById:function(){var e=i()(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.h)(t);case 2:"SUCCESS"==e.sent.status&&this.refreshModuleList();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),refreshModuleList:function(){var e=i()(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.X)(this.offset,this.current_page,this.search);case 2:"SUCCESS"==(t=e.sent).status&&(this.modules=t.modules,this.total=t.paginator.totalcount);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleChange:function(e){this.current_page=e,this.refreshModuleList()},handlePageSizeChange:function(e){this.offset=e,this.refreshModuleList()},handleSearch:function(e){this.offset=10,this.current_page=1,this.search=e,this.refreshModuleList()},addModule:function(){this.$refs.moduleEditModal.showModal()},editModule:function(){var e=i()(o.a.mark(function e(t,r,a){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.q)(t,r,a);case 2:"SUCCESS"==e.sent.status?(this.$refs.moduleEditForm.handleSubmitSuccess("提交成功!"),this.$refs.moduleEditModal.hideModal(),this.refreshModuleList()):this.$refs.workEditForm.handleSubmitError("提交失败!");case 4:case"end":return e.stop()}},e,this)}));return function(t,r,a){return e.apply(this,arguments)}}(),moduleNameValidator:function(e,t,r){""===t?r(new Error("字段值不能为空!")):Object(f.o)(t)?r():r(new Error("存在非法字符，只能包含字母，数字，下划线!"))}},mounted:function(){this.refreshModuleList()}},h={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("ISimpleLeftRightRow",{staticStyle:{"margin-bottom":"10px","margin-right":"10px"}},[r("span",{attrs:{slot:"left"},slot:"left"},[r("Button",{attrs:{type:"success"},on:{click:e.addModule}},[e._v("新增")]),e._v(" "),r("ISimpleConfirmModal",{ref:"moduleEditModal",attrs:{"modal-title":"新增/编辑 module","modal-width":600,"footer-hide":!0}},[r("IKeyValueForm",{ref:"moduleEditForm",attrs:{"form-key-label":"module_name","form-value-label":"module_desc","form-key-placeholder":"请输入 module_name","form-value-placeholder":"请输入 module_desc","formkey-validator":e.moduleNameValidator},on:{handleSubmit:e.editModule}})],1)],1),e._v(" "),r("ISimpleSearch",{attrs:{slot:"right"},on:{handleSimpleSearch:e.handleSearch},slot:"right"})],1),e._v(" "),r("Table",{attrs:{border:"",columns:e.columns1,data:e.modules,size:"small"}}),e._v(" "),r("Page",{attrs:{total:e.total,"page-size":e.offset,"show-total":"","show-sizer":"",styles:{"text-align":"center","margin-top":"10px"}},on:{"on-change":e.handleChange,"on-page-size-change":e.handlePageSizeChange}})],1)},staticRenderFns:[]};var p=r("VU/8")(c,h,!1,function(e){r("uUH+")},"data-v-bc709354",null);t.default=p.exports},gPTX:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={name:"IKeyValueForm",props:{formKeyLabel:{type:String,default:"formKeyLabel"},formValueLabel:{type:String,default:"formValueLabel"},formKeyPlaceholder:{type:String,default:"请输入 formKey"},formValuePlaceholder:{type:String,default:"请输入 formValue"},formkeyValidator:{type:Function},formvalueValidator:{type:Function}},data:function(){return{formValidate:{formmode:null,formkey:"",formvalue:""},ruleValidate:{formkey:[{validator:this.formkeyValidator,trigger:"blur"},{required:!0,message:"formkey 不能为空!",trigger:"blur"}],formvalue:[{validator:this.formvalueValidator,trigger:"blur"},{required:!0,message:"formvalue 不能为空!",trigger:"blur"}]}}},methods:{handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.$emit("handleSubmit",t.formValidate.formmode,t.formValidate.formkey,t.formValidate.formvalue)})},handleSubmitSuccess:function(e){this.formValidate.formmode=null,this.handleReset("formValidate"),this.$Message.success(e)},handleSubmitError:function(e){this.$Message.error(e)},initFormData:function(e,t,r){this.formValidate.formmode=e,this.formValidate.formkey=t,this.formValidate.formvalue=r},handleReset:function(e){this.$refs[e].resetFields()}}},o={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":150}},[r("FormItem",{attrs:{label:e.formKeyLabel,prop:"formkey"}},[r("Input",{attrs:{placeholder:e.formKeyPlaceholder},model:{value:e.formValidate.formkey,callback:function(t){e.$set(e.formValidate,"formkey","string"==typeof t?t.trim():t)},expression:"formValidate.formkey"}})],1),e._v(" "),r("FormItem",{attrs:{label:e.formValueLabel,prop:"formvalue"}},[r("Input",{attrs:{type:"textarea",rows:4,placeholder:e.formValuePlaceholder},model:{value:e.formValidate.formvalue,callback:function(t){e.$set(e.formValidate,"formvalue","string"==typeof t?t.trim():t)},expression:"formValidate.formvalue"}})],1),e._v(" "),e._t("extra"),e._v(" "),r("FormItem",[r("Button",{staticStyle:{"margin-right":"6px"},attrs:{type:"success"},on:{click:function(t){e.handleSubmit("formValidate")}}},[e._v("提交")]),e._v(" "),r("Button",{staticStyle:{"margin-right":"6px"},attrs:{type:"warning"},on:{click:function(t){e.handleReset("formValidate")}}},[e._v("重置")])],1)],2)},staticRenderFns:[]};var l=r("VU/8")(a,o,!1,function(e){r("8pn2")},"data-v-6f8cd4ef",null);t.default=l.exports},"uUH+":function(e,t){}});
//# sourceMappingURL=4.42131715b67ce5200871.js.map