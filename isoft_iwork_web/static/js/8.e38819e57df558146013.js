webpackJsonp([8],{Pot2:function(e,a){},syHC:function(e,a){},yTah:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("Xxa5"),l=t.n(r),o=t("exGp"),i=t.n(o),n=t("gyMJ"),s=t("Nb9Q"),u=t("XZCL"),f=t("gPTX"),m=t("pwhd"),c=t("GCuT"),d={name:"GlobalVarForm",props:{formKeyLabel:{type:String,default:"formKeyLabel"},formValueLabel01:{type:String,default:"formValueLabel01"},formValueLabel02:{type:String,default:"formValueLabel02"},formKeyPlaceholder:{type:String,default:"请输入 formKey"},formValuePlaceholder01:{type:String,default:"请输入 formValue01"},formValuePlaceholder02:{type:String,default:"请输入 formValue02"},formkeyValidator:{type:Function},formvalueValidator:{type:Function},EnvNameList:{type:Array,required:!0}},data:function(){return{formValidate:{formmode:null,formkey:"",formvalue01:"",formvalue02:""},ruleValidate:{formkey:[{validator:this.formkeyValidator,trigger:"blur"},{required:!0,message:"formkey 不能为空!",trigger:"blur"}],formvalue01:[{validator:this.formvalueValidator,trigger:"blur"},{required:!0,message:"请选择!",trigger:"change"}],formvalue02:[{validator:this.formvalueValidator,trigger:"blur"},{required:!0,message:"formvalue02 不能为空!",trigger:"blur"}]}}},methods:{handleSubmit:function(e){var a=this;this.$refs[e].validate(function(e){e&&a.$emit("handleSubmit",a.formValidate.formmode,a.formValidate.formkey,a.formValidate.formvalue01,a.formValidate.formvalue02)})},handleSubmitSuccess:function(e){this.formValidate.formmode=null,this.handleReset("formValidate"),this.$Message.success(e)},handleSubmitError:function(e){this.$Message.error(e)},initFormData:function(e,a,t,r){this.formValidate.formmode=e,this.formValidate.formkey=a,this.formValidate.formvalue01=t,this.formValidate.formvalue02=r},handleReset:function(e){this.$refs[e].resetFields()}}},h={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":150}},[t("FormItem",{attrs:{label:e.formKeyLabel,prop:"formkey"}},[t("Input",{attrs:{placeholder:e.formKeyPlaceholder},model:{value:e.formValidate.formkey,callback:function(a){e.$set(e.formValidate,"formkey","string"==typeof a?a.trim():a)},expression:"formValidate.formkey"}})],1),e._v(" "),t("FormItem",{attrs:{label:e.formValueLabel01,prop:"formvalue01"}},[t("Select",{staticStyle:{width:"100%"},attrs:{placeholder:e.formValuePlaceholder01},model:{value:e.formValidate.formvalue01,callback:function(a){e.$set(e.formValidate,"formvalue01","string"==typeof a?a.trim():a)},expression:"formValidate.formvalue01"}},e._l(e.EnvNameList,function(a){return t("Option",{key:a,attrs:{value:a}},[e._v(e._s(a))])}))],1),e._v(" "),t("FormItem",{attrs:{label:e.formValueLabel02,prop:"formvalue02"}},[t("Input",{attrs:{placeholder:e.formValuePlaceholder02},model:{value:e.formValidate.formvalue02,callback:function(a){e.$set(e.formValidate,"formvalue02","string"==typeof a?a.trim():a)},expression:"formValidate.formvalue02"}})],1),e._v(" "),t("FormItem",[t("Button",{staticStyle:{"margin-right":"6px"},attrs:{type:"success"},on:{click:function(a){e.handleSubmit("formValidate")}}},[e._v("提交")]),e._v(" "),t("Button",{staticStyle:{"margin-right":"6px"},attrs:{type:"warning"},on:{click:function(a){e.handleReset("formValidate")}}},[e._v("重置")])],1)],1)},staticRenderFns:[]};var p={name:"GlobalVarList",components:{GlobalVarForm:t("VU/8")(d,h,!1,function(e){t("Pot2")},"data-v-59ba4383",null).exports,ISimpleLeftRightRow:s.default,ISimpleSearch:u.default,IKeyValueForm:f.default,ISimpleConfirmModal:m.default},data:function(){var e=this;return{current_page:1,total:0,offset:10,search:"",globalVars:[],EnvNameList:[],onuse:"",columns1:[{title:"name",key:"name",width:200},{title:"env_name",key:"env_name",width:100},{title:"value",key:"value",width:450},{title:"操作",key:"operate",render:function(a,t){return a("div",[a("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.$refs.globalVarModal.showModal(),e.$refs.globalVarForm.initFormData(e.globalVars[t.index].id,e.globalVars[t.index].name,e.globalVars[t.index].env_name,e.globalVars[t.index].value)}}},"编辑"),a("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.deleteGlobalVar(e.globalVars[t.index].id)}}},"删除")])}}]}},methods:{queryEvnNameList:function(){var e=i()(l.a.mark(function e(){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n._22)();case 2:"SUCCESS"==(a=e.sent).status?this.EnvNameList=a.EnvNameList:this.$Message.error("查询环境EnvNameList失败！");case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),addGlobalVar:function(){this.$refs.globalVarModal.showModal(),this.$refs.globalVarForm.initFormData()},editGlobalVar:function(){var e=i()(l.a.mark(function e(a,t,r,o){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.u)(a,t,r,o);case 2:"SUCCESS"==e.sent.status?(this.$refs.globalVarForm.handleSubmitSuccess("提交成功!"),this.$refs.globalVarModal.hideModal(),this.refreshGlobalVarList()):this.$refs.globalVarForm.handleSubmitError("提交失败!");case 4:case"end":return e.stop()}},e,this)}));return function(a,t,r,l){return e.apply(this,arguments)}}(),handleChange:function(e){this.current_page=e,this.refreshGlobalVarList()},handlePageSizeChange:function(e){this.offset=e,this.refreshGlobalVarList()},handleSearch:function(e){this.offset=10,this.current_page=1,this.search=e,this.refreshGlobalVarList()},refreshGlobalVarList:function(){var e=i()(l.a.mark(function e(){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.W)(this.offset,this.current_page,this.search);case 2:"SUCCESS"==(a=e.sent).status&&(this.onuse=a.onuse,this.globalVars=a.globalVars,this.total=a.paginator.totalcount);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),globalVarNameValidator:function(e,a,t){Object(c.k)(a)?t():t(new Error("存在非法字符，只能包含字母，数字，下划线!"))},deleteGlobalVar:function(){var e=i()(l.a.mark(function e(a){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.j)(a);case 2:"SUCCESS"==(t=e.sent).status?this.refreshGlobalVarList():this.$Message.error(t.errorMsg);case 4:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}()},mounted:function(){this.refreshGlobalVarList(),this.queryEvnNameList()}},V={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("ISimpleLeftRightRow",{staticStyle:{"margin-bottom":"10px","margin-right":"10px"}},[t("span",{attrs:{slot:"left"},slot:"left"},[t("Button",{attrs:{type:"success"},on:{click:e.addGlobalVar}},[e._v("新增")]),t("code",{staticStyle:{"margin-left":"200px",color:"#eb7d37"}},[e._v("当前正在使用的环境:"),t("b",{staticStyle:{"margin-left":"10px",color:"#cc0000"}},[e._v(e._s(e.onuse))])]),e._v(" "),t("ISimpleConfirmModal",{ref:"globalVarModal",attrs:{"modal-title":"新增/编辑 GlobalVar","modal-width":600,"footer-hide":!0}},[t("GlobalVarForm",{ref:"globalVarForm",attrs:{EnvNameList:e.EnvNameList,"form-key-label":"name","form-value-label01":"env_name","form-value-label02":"value","form-key-placeholder":"请输入 GlobalVarName","form-value-placeholder01":"请选择...","form-value-placeholder02":"请输入 GlobalVarValue02","formkey-validator":e.globalVarNameValidator},on:{handleSubmit:e.editGlobalVar}})],1)],1),e._v(" "),t("ISimpleSearch",{attrs:{slot:"right"},on:{handleSimpleSearch:e.handleSearch},slot:"right"})],1),e._v(" "),t("Table",{attrs:{border:"",columns:e.columns1,data:e.globalVars,size:"small"}}),e._v(" "),t("Page",{attrs:{total:e.total,"page-size":e.offset,"show-total":"","show-sizer":"",styles:{"text-align":"center","margin-top":"10px"}},on:{"on-change":e.handleChange,"on-page-size-change":e.handlePageSizeChange}})],1)},staticRenderFns:[]};var g=t("VU/8")(p,V,!1,function(e){t("syHC")},"data-v-31e6c968",null);a.default=g.exports}});
//# sourceMappingURL=8.e38819e57df558146013.js.map