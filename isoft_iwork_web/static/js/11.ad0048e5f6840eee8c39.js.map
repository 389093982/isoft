{"version":3,"sources":["webpack:///src/components/IWork/IModule/IModuleList.vue","webpack:///./src/components/IWork/IModule/IModuleList.vue?0bc4","webpack:///./src/components/IWork/IModule/IModuleList.vue"],"names":["IModuleList","name","components","ISimpleLeftRightRow","ISimpleConfirmModal","IKeyValueForm","ISimpleSearch","data","_this","this","current_page","total","offset","search","modules","columns1","title","key","render","h","params","props","type","size","style","marginRight","on","click","$refs","moduleEditModal","showModal","moduleEditForm","initFormData","index","id","module_name","module_desc","deleteModuleById","methods","_ref","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","Object","api","sent","status","refreshModuleList","stop","_x","apply","arguments","_ref2","_callee2","result","_context2","paginator","totalcount","handleChange","page","handlePageSizeChange","pageSize","handleSearch","addModule","editModule","_ref3","_callee3","module_id","_context3","handleSubmitSuccess","hideModal","workEditForm","handleSubmitError","_x2","_x3","_x4","moduleNameValidator","rule","value","callback","Error","tools","mounted","IModule_IModuleList","_vm","_h","$createElement","_c","_self","staticStyle","margin-bottom","margin-right","attrs","slot","_v","ref","modal-title","modal-width","footer-hide","form-key-label","form-value-label","form-key-placeholder","form-value-placeholder","formkey-validator","handleSubmit","handleSimpleSearch","border","columns","page-size","show-total","show-sizer","styles","text-align","margin-top","on-change","on-page-size-change","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/11.ad0048e5f6840eee8c39.js","sourcesContent":["<template>\r\n  <div>\r\n    <ISimpleLeftRightRow style=\"margin-bottom: 10px;margin-right: 10px;\">\r\n      <!-- left 插槽部分 -->\r\n      <span slot=\"left\">\r\n        <Button type=\"success\" @click=\"addModule\">新增</Button>\r\n        <ISimpleConfirmModal ref=\"moduleEditModal\" modal-title=\"新增/编辑 module\" :modal-width=\"600\" :footer-hide=\"true\">\r\n          <IKeyValueForm ref=\"moduleEditForm\" form-key-label=\"module_name\" form-value-label=\"module_desc\"\r\n                         form-key-placeholder=\"请输入 module_name\" form-value-placeholder=\"请输入 module_desc\"\r\n                         @handleSubmit=\"editModule\" :formkey-validator=\"moduleNameValidator\">\r\n          </IKeyValueForm>\r\n        </ISimpleConfirmModal>\r\n      </span>\r\n\r\n      <!-- right 插槽部分 -->\r\n      <ISimpleSearch slot=\"right\" @handleSimpleSearch=\"handleSearch\"/>\r\n    </ISimpleLeftRightRow>\r\n\r\n    <Table border :columns=\"columns1\" :data=\"modules\" size=\"small\"></Table>\r\n    <Page :total=\"total\" :page-size=\"offset\" show-total show-sizer :styles=\"{'text-align': 'center','margin-top': '10px'}\"\r\n          @on-change=\"handleChange\" @on-page-size-change=\"handlePageSizeChange\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import ISimpleLeftRightRow from \"../../Common/layout/ISimpleLeftRightRow\"\r\n  import ISimpleConfirmModal from \"../../Common/modal/ISimpleConfirmModal\"\r\n  import IKeyValueForm from \"../../Common/form/IKeyValueForm\"\r\n  import ISimpleSearch from \"../../Common/search/ISimpleSearch\"\r\n  import {ModuleList} from \"../../../api\"\r\n  import {EditModule} from \"../../../api\"\r\n  import {DeleteModuleById} from \"../../../api\"\r\n  import {validateCommonPatternForString} from \"../../../tools/index\"\r\n\r\n  export default {\r\n    name: \"IModuleList\",\r\n    components:{ISimpleLeftRightRow,ISimpleConfirmModal,IKeyValueForm,ISimpleSearch},\r\n    data(){\r\n      return {\r\n        // 当前页\r\n        current_page:1,\r\n        // 总数\r\n        total:0,\r\n        // 每页记录数\r\n        offset:10,\r\n        // 搜索条件\r\n        search:\"\",\r\n        modules:[],\r\n        columns1:[\r\n          {\r\n            title: 'module_name',\r\n            key: 'module_name',\r\n          },\r\n          {\r\n            title: 'module_desc',\r\n            key: 'module_desc',\r\n          },\r\n          {\r\n            title: '操作',\r\n            key: 'operate',\r\n            render: (h, params) => {\r\n              return h('div', [\r\n                h('Button', {\r\n                  props: {\r\n                    type: 'success',\r\n                    size: 'small'\r\n                  },\r\n                  style: {\r\n                    marginRight: '5px',\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      this.$refs.moduleEditModal.showModal();\r\n                      this.$refs.moduleEditForm.initFormData(this.modules[params.index].id, this.modules[params.index].module_name, this.modules[params.index].module_desc);\r\n                    }\r\n                  }\r\n                }, '编辑'),\r\n                h('Button', {\r\n                  props: {\r\n                    type: 'error',\r\n                    size: 'small'\r\n                  },\r\n                  style: {\r\n                    marginRight: '5px',\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      this.deleteModuleById(this.modules[params.index]['id']);\r\n                    }\r\n                  }\r\n                }, '删除'),\r\n              ]);\r\n            }\r\n          },\r\n        ],\r\n      }\r\n    },\r\n    methods:{\r\n      deleteModuleById:async function(id){\r\n        const result = await DeleteModuleById(id);\r\n        if(result.status==\"SUCCESS\"){\r\n          this.refreshModuleList();\r\n        }\r\n      },\r\n      refreshModuleList:async function () {\r\n        const result = await ModuleList(this.offset,this.current_page,this.search);\r\n        if(result.status==\"SUCCESS\"){\r\n          this.modules = result.modules;\r\n          this.total = result.paginator.totalcount;\r\n        }\r\n      },\r\n      handleChange(page){\r\n        this.current_page = page;\r\n        this.refreshModuleList();\r\n      },\r\n      handlePageSizeChange(pageSize){\r\n        this.offset = pageSize;\r\n        this.refreshModuleList();\r\n      },\r\n      handleSearch(data){\r\n        this.offset = 10;\r\n        this.current_page = 1;\r\n        this.search = data;\r\n        this.refreshModuleList();\r\n      },\r\n      addModule:function(){\r\n        this.$refs.moduleEditModal.showModal();\r\n      },\r\n      editModule:async function (module_id, module_name, module_desc) {\r\n        const result = await EditModule(module_id, module_name, module_desc);\r\n        if(result.status == \"SUCCESS\"){\r\n          this.$refs.moduleEditForm.handleSubmitSuccess(\"提交成功!\");\r\n          this.$refs.moduleEditModal.hideModal();\r\n          this.refreshModuleList();\r\n        }else{\r\n          this.$refs.workEditForm.handleSubmitError(\"提交失败!\");\r\n        }\r\n      },\r\n      moduleNameValidator (rule, value, callback){\r\n        if (value === '') {\r\n          callback(new Error('字段值不能为空!'));\r\n        } else if (!validateCommonPatternForString(value)) {\r\n          callback(new Error('存在非法字符，只能包含字母，数字，下划线!'));\r\n        } else {\r\n          callback();\r\n        }\r\n      },\r\n    },\r\n    mounted(){\r\n      this.refreshModuleList();\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/IWork/IModule/IModuleList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('ISimpleLeftRightRow',{staticStyle:{\"margin-bottom\":\"10px\",\"margin-right\":\"10px\"}},[_c('span',{attrs:{\"slot\":\"left\"},slot:\"left\"},[_c('Button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.addModule}},[_vm._v(\"新增\")]),_vm._v(\" \"),_c('ISimpleConfirmModal',{ref:\"moduleEditModal\",attrs:{\"modal-title\":\"新增/编辑 module\",\"modal-width\":600,\"footer-hide\":true}},[_c('IKeyValueForm',{ref:\"moduleEditForm\",attrs:{\"form-key-label\":\"module_name\",\"form-value-label\":\"module_desc\",\"form-key-placeholder\":\"请输入 module_name\",\"form-value-placeholder\":\"请输入 module_desc\",\"formkey-validator\":_vm.moduleNameValidator},on:{\"handleSubmit\":_vm.editModule}})],1)],1),_vm._v(\" \"),_c('ISimpleSearch',{attrs:{\"slot\":\"right\"},on:{\"handleSimpleSearch\":_vm.handleSearch},slot:\"right\"})],1),_vm._v(\" \"),_c('Table',{attrs:{\"border\":\"\",\"columns\":_vm.columns1,\"data\":_vm.modules,\"size\":\"small\"}}),_vm._v(\" \"),_c('Page',{attrs:{\"total\":_vm.total,\"page-size\":_vm.offset,\"show-total\":\"\",\"show-sizer\":\"\",\"styles\":{'text-align': 'center','margin-top': '10px'}},on:{\"on-change\":_vm.handleChange,\"on-page-size-change\":_vm.handlePageSizeChange}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-bc709354\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/IWork/IModule/IModuleList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-bc709354\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./IModuleList.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./IModuleList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./IModuleList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-bc709354\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./IModuleList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-bc709354\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/IWork/IModule/IModuleList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}