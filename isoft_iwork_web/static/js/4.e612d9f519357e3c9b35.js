webpackJsonp([4],{"/7/g":function(e,t){},"T/ZV":function(e,t){},T592:function(e,t,n){"use strict";var a={name:"IFileUpload",props:{showButton:{type:Boolean,default:!0},uploadLabel:{type:String,default:"文件上传"},action:{type:String,default:""},size:{type:String,default:"default"},format:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!1},autoHideModal:{type:Boolean,deafult:!0},extraData:{type:Object,default:function(){return{}}}},data:function(){return{fileUploadModal:!1}},methods:{onFormatError:function(){this.$Message.error("文件格式不合法!")},uploadComplete:function(e,t){"SUCCESS"==e.status?(e.extraData=this.extraData,this.$emit("uploadComplete",e),this.$Notice.success({title:"文件上传成功",desc:"文件 "+t.name+" 上传成功!"}),this.autoHideModal&&this.hideModal()):this.$Notice.error({title:"文件上传失败",desc:"文件 "+t.name+" 上传失败!"})},showModal:function(){this.fileUploadModal=!0},hideModal:function(){this.fileUploadModal=!1}}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e.showButton?n("Button",{attrs:{size:e.size,type:"success"},on:{click:function(t){e.fileUploadModal=!0}}},[e._v(e._s(e.uploadLabel))]):e._e(),e._v(" "),n("Modal",{attrs:{width:"500",title:e.uploadLabel,"mask-closable":!1},model:{value:e.fileUploadModal,callback:function(t){e.fileUploadModal=t},expression:"fileUploadModal"}},[n("div",[n("Upload",{ref:"upload",attrs:{multiple:"","on-success":e.uploadComplete,action:e.action,format:e.format,"on-format-error":e.onFormatError,multiple:e.multiple}},[n("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[e._v(e._s(e.uploadLabel))])],1)],1)])],1)},staticRenderFns:[]};var s=n("VU/8")(a,o,!1,function(e){n("/7/g")},"data-v-77862cb6",null);t.a=s.exports},ZOWB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Xxa5"),o=n.n(a),s=n("exGp"),i=n.n(s),l=n("pwhd"),r=n("Nb9Q"),c=n("gPTX"),u=n("XZCL"),p=n("T592"),d=n("gyMJ"),h={name:"Placement",components:{ISimpleLeftRightRow:r.default,ISimpleConfirmModal:l.default,IKeyValueForm:c.default,ISimpleSearch:u.default,IFileUpload:p.a},props:{chooserMode:{type:Boolean,default:!1}},data:function(){var e=this;return{current_page:1,total:0,offset:10,search:"",placements:[],columns1:[{title:"id",key:"id",width:100},{title:"placement_name",key:"placement_name",width:300},{title:"placement_label",key:"placement_label",width:300},{title:"placement_desc",key:"placement_desc",width:400},{title:"操作",key:"operate",width:250,fixed:"right",render:function(t,n){return t("div",[t("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px",display:e.chooserMode?"undefined":"none"},on:{click:function(){e.$emit("choosePlacement",e.placements[n.index].placement_name)}}},"选择"),t("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px",display:e.chooserMode?"none":"undefined"},on:{click:function(){e.deletePlacementById(e.placements[n.index].id)}}},"删除"),t("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px",display:e.chooserMode?"none":"undefined"},on:{click:function(){e.$router.push({path:"/iwork/placementEdit",query:{id:e.placements[n.index].id}})}}},"编辑"),t("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px",display:e.chooserMode?"none":"undefined"},on:{click:function(){e.copyPlacement(e.placements[n.index].id)}}},"复制"),t("Button",{props:{type:"warning",size:"small"},style:{marginRight:"5px",display:e.chooserMode?"none":"undefined"},on:{click:function(){e.$router.push({path:"/iwork/elementList",query:{placement_name:e.placements[n.index].placement_name}})}}},"元素管理")])}}]}},methods:{uploadComplete:function(e){"SUCCESS"==e.status?(this.refreshPlacementList(),this.$Message.success("导入成功！")):this.$Message.error(e.errorMsg)},copyPlacement:function(){var e=i()(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(t);case 2:"SUCCESS"==(n=e.sent).status?(this.$Message.success("复制成功！"),this.refreshPlacementList()):this.$Message.error(n.errorMsg);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),refreshPlacementList:function(){var e=i()(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.K)(this.offset,this.current_page,this.search);case 2:"SUCCESS"==(t=e.sent).status&&(this.placements=t.placements,this.total=t.paginator.totalcount);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleSearch:function(e){this.offset=10,this.current_page=1,this.search=e,this.refreshPlacementList()},handleChange:function(e){this.current_page=e,this.refreshPlacementList()},handlePageSizeChange:function(e){this.offset=e,this.refreshPlacementList()},deletePlacementById:function(e){var t,n=this,a=this;a.$Modal.confirm({title:"删除",content:"确认删除该条数据吗？请谨慎操作！",onOk:(t=i()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(d.m)(e);case 2:"SUCCESS"==(s=t.sent).status?(a.$Message.success("删除成功！"),a.refreshPlacementList()):a.$Message.error(s.errorMsg);case 4:case"end":return t.stop()}},t,n)})),function(){return t.apply(this,arguments)}),onCancel:function(){a.$Message.info("取消操作")}})}},mounted:function(){this.refreshPlacementList()}},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ISimpleLeftRightRow",{staticStyle:{"margin-bottom":"10px","margin-right":"10px"}},[n("div",{attrs:{slot:"left"},slot:"left"},[this.chooserMode?e._e():n("Button",{attrs:{type:"success",size:"small"},on:{click:function(t){e.$router.push({path:"/iwork/placementEdit"})}}},[e._v("新增占位符\n      ")]),e._v(" "),n("IFileUpload",{ref:"fileUpload",attrs:{size:"small",action:"/api/iwork/import",uploadLabel:"导入"},on:{uploadComplete:e.uploadComplete}})],1),e._v(" "),n("ISimpleSearch",{attrs:{slot:"right"},on:{handleSimpleSearch:e.handleSearch},slot:"right"})],1),e._v(" "),n("Table",{attrs:{border:"",columns:e.columns1,data:e.placements,size:"small"}}),e._v(" "),n("Page",{attrs:{total:e.total,"page-size":e.offset,"show-total":"","show-sizer":"",styles:{"text-align":"center","margin-top":"10px"}},on:{"on-change":e.handleChange,"on-page-size-change":e.handlePageSizeChange}})],1)},staticRenderFns:[]};var m=n("VU/8")(h,f,!1,function(e){n("T/ZV")},"data-v-40100312",null);t.default=m.exports}});
//# sourceMappingURL=4.e612d9f519357e3c9b35.js.map