webpackJsonp([18],{DL3V:function(e,t){},KbTn:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("Xxa5"),n=o.n(r),a=o("exGp"),s=o.n(a),i=o("Nb9Q"),l=o("pwhd"),d=o("gPTX"),u=o("XZCL"),c=o("gyMJ"),m=o("GCuT"),h={name:"IModuleList",components:{ISimpleLeftRightRow:i.default,ISimpleConfirmModal:l.default,IKeyValueForm:d.default,ISimpleSearch:u.default},data:function(){var e=this;return{current_page:1,total:0,offset:10,search:"",modules:[],columns1:[{title:"module_name",key:"module_name"},{title:"module_desc",key:"module_desc"},{title:"操作",key:"operate",render:function(t,o){return t("div",[t("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.$refs.moduleEditModal.showModal(),e.$refs.moduleEditForm.initFormData(e.modules[o.index].id,e.modules[o.index].module_name,e.modules[o.index].module_desc)}}},"编辑"),t("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.deleteModuleById(e.modules[o.index].id)}}},"删除")])}}]}},methods:{deleteModuleById:function(){var e=s()(n.a.mark(function e(t){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.k)(t);case 2:"SUCCESS"==e.sent.status&&this.refreshModuleList();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),refreshModuleList:function(){var e=s()(n.a.mark(function e(){var t;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c._2)(this.offset,this.current_page,this.search);case 2:"SUCCESS"==(t=e.sent).status&&(this.modules=t.modules,this.total=t.paginator.totalcount);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleChange:function(e){this.current_page=e,this.refreshModuleList()},handlePageSizeChange:function(e){this.offset=e,this.refreshModuleList()},handleSearch:function(e){this.offset=10,this.current_page=1,this.search=e,this.refreshModuleList()},addModule:function(){this.$refs.moduleEditModal.showModal()},editModule:function(){var e=s()(n.a.mark(function e(t,o,r){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.v)(t,o,r);case 2:"SUCCESS"==e.sent.status?(this.$refs.moduleEditForm.handleSubmitSuccess("提交成功!"),this.$refs.moduleEditModal.hideModal(),this.refreshModuleList()):this.$refs.workEditForm.handleSubmitError("提交失败!");case 4:case"end":return e.stop()}},e,this)}));return function(t,o,r){return e.apply(this,arguments)}}(),moduleNameValidator:function(e,t,o){""===t?o(new Error("字段值不能为空!")):Object(m.k)(t)?o():o(new Error("存在非法字符，只能包含字母，数字，下划线!"))}},mounted:function(){this.refreshModuleList()}},f={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("ISimpleLeftRightRow",{staticStyle:{"margin-bottom":"10px","margin-right":"10px"}},[o("span",{attrs:{slot:"left"},slot:"left"},[o("Button",{attrs:{type:"success"},on:{click:e.addModule}},[e._v("新增")]),e._v(" "),o("ISimpleConfirmModal",{ref:"moduleEditModal",attrs:{"modal-title":"新增/编辑 module","modal-width":600,"footer-hide":!0}},[o("IKeyValueForm",{ref:"moduleEditForm",attrs:{"form-key-label":"module_name","form-value-label":"module_desc","form-key-placeholder":"请输入 module_name","form-value-placeholder":"请输入 module_desc","formkey-validator":e.moduleNameValidator},on:{handleSubmit:e.editModule}})],1)],1),e._v(" "),o("ISimpleSearch",{attrs:{slot:"right"},on:{handleSimpleSearch:e.handleSearch},slot:"right"})],1),e._v(" "),o("Table",{attrs:{border:"",columns:e.columns1,data:e.modules,size:"small"}}),e._v(" "),o("Page",{attrs:{total:e.total,"page-size":e.offset,"show-total":"","show-sizer":"",styles:{"text-align":"center","margin-top":"10px"}},on:{"on-change":e.handleChange,"on-page-size-change":e.handlePageSizeChange}})],1)},staticRenderFns:[]};var p=o("VU/8")(h,f,!1,function(e){o("DL3V")},"data-v-2d7ea26d",null);t.default=p.exports}});
//# sourceMappingURL=18.200185cb80190f06a25f.js.map